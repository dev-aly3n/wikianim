{"version":3,"sources":["components/detailPage/Stream.js","components/detailPage/StreamList.js","components/detailPage/Popularity.js","components/detailPage/ExternalLinks.js","components/detailPage/Rank.js","components/detailPage/Trailer.js","components/detailPage/Character.js","components/detailPage/CharacterList.js","pages/CharacterDetail.js","components/detailPage/Review.js","components/detailPage/ReviewList.js","pages/AnimeDetail.js","components/detailPage/CircleRate.js","utils/helpers.js","components/detailPage/Recom.js","components/Anime.js","components/AnimeList.js","components/detailPage/RecomList.js"],"names":["Stream","episode","motion","a","href","url","target","rel","className","animate","opacity","transition","duration","initial","loading","height","alt","src","thumbnail","title","StreamList","allEpisode","colsInRow","initialQuantity","keyParam","useState","stream","showMore","setShowMore","gridColsTemp","div","filter","_","index","map","length","onClick","e","remove","Popularity","popularityRange","popularity","toFixed","style","left","icon","faFire","ExternalLinks","bg","link","site","Rank","bgRank","bgBorder","rankRound","rank","context","includes","allTime","year","season","toLowerCase","Trailer","embedId","width","frameBorder","allow","allowFullScreen","Character","charID","staffID","char","animeID","mangaStaffID","client","useApolloClient","linkRef","useRef","node","id","undefined","voiceActors","useEffect","current","addEventListener","charClickHandler","writeQuery","query","gql","data","loadingbar","__typename","isLoading","ref","to","image","medium","fontSize","name","full","role","languageV2","unKnownPng","CharacterList","characters","CharacterDetail","characterID","actorID","staffContentShowLess","charContentShowLess","history","useHistory","modalCloseHandler","classList","contains","parentElement","document","body","overflow","push","useQuery","charQuery","variables","char_id","staff_id","error","faTimesCircle","Errors","errMsg","message","character","staff","Staff","charAnimeList","media","edges","staffAnimeList","staffMedia","charFavouritesRange","favourites","actorFavouritesRange","showMoreLessBtn","large","CircleRate","rate","symbol","faHeart","size","age","dateOfBirth","day","monthNames","month","gender","description","content","AnimeList","allAnimeData","Review","review","reviewContentShowLess","reviewText","replace","test","decode","replaceAll","date","Date","createdAt","getFullYear","getMonth","getDay","rating","user","avatar","onError","onerror","score","ratingAmount","summary","ReviewList","allReviewData","display","AnimeDetail","params","useParams","location","useLocation","Number","pathname","split","isCharacterPage","detailQuery","Loading","aData","Media","english","romaji","startDate","endDate","banner","bannerImage","coverImage","animeColor30","hexToRgbA","color","externalLinks","genres","rankings","relations","reviews","streamingEpisodes","studios","tags","nextAiringEpisode","favouritesRange","isOneDate","Fragment","backgroundImage","process","backgroundColor","borderColor","format","seasonYear","episodes","secondsToDhms","volumes","chapters","gen","faClock","timeUntilAiring","isMain","st","source","meanScore","trailer","tag","RecomList","grad","borderRadius","right","top","transform","hex","c","substring","join","seconds","dhms","d","Math","floor","h","m","s","dDisplay","hDisplay","mDisplay","refElement","extraClassName","setTimeout","firstElementChild","offsetHeight","position","showMoreBtn","createElement","textContent","lastElementChild","after","Recom","recom","widthParam","recMedia","mediaRecommendation","draggable","preventDefault","status","faThumbsDown","faThumbsUp","Anime","anime","averageScore","counterAnime","trimedAllAnimeData","anim","animeData","allRecom","rightLeftScroll","wastefulCover","recommend","isSmallDevice","documentElement","clientWidth","magicNum1","magicNum2","allRecomData","recomListQuery","recommendations","startx","scrollLeft","isDown","onTouchEnd","recLeft","scrollWidth","round","scrollTo","behavior","onMouseDown","pageX","offsetLeft","onMouseLeave","onMouseUp","onMouseMove","walk","recWidth","faChevronCircleRight","newRecommend"],"mappings":"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","file":"static/js/5.c8885238.chunk.js","sourcesContent":["//components\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst Stream = ({ episode }) => {\r\n  return (\r\n    <motion.a\r\n      href={episode.url}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"anime-card-container hover-card-num-1\"\r\n      animate={{ opacity: 1, transition: { duration: 2 } }}\r\n      initial={{ opacity: 0 }}\r\n    >\r\n      <img loading=\"lazy\" height={224} alt=\"\" src={episode.thumbnail} />\r\n      <h3 className=\"text-sm line-clamp-2 px-2\">{episode.title}</h3>\r\n    </motion.a>\r\n  );\r\n};\r\n\r\nexport default Stream;\r\n","//libs\r\nimport React, { useState } from \"react\";\r\n//components\r\nimport Stream from \"./Stream\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst StreamList = ({ allEpisode, colsInRow, initialQuantity, keyParam }) => {\r\n  const [showMore, setShowMore] = useState({\r\n    stream: initialQuantity,\r\n  });\r\n\r\n  //manage columns in diferent size (we cant do this in css bcs we change grid templates for mobile and tablet)\r\n  let gridColsTemp = `grid-cols-2 ssm:grid-cols-${colsInRow - 1} lg:grid-cols-${\r\n    colsInRow - 1\r\n  } xl:grid-cols-${colsInRow}`;\r\n\r\n  const streamShowMoreHandler = (e) => {\r\n    if (showMore.stream > 20) {\r\n      setShowMore({ stream: showMore.stream + 999 });\r\n      e.target.remove();\r\n    } else {\r\n      setShowMore({ stream: showMore.stream + 10 });\r\n    }\r\n    if (showMore.stream + 10 >= allEpisode.length) {\r\n      e.target.remove();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div className=\"pb-10\">\r\n      <div className=\"anime-list-container\">\r\n        <div className={`anime-list ${gridColsTemp}`}>\r\n          {allEpisode\r\n            .filter((_, index) => index <= showMore.stream - 1)\r\n            .map((episode) => {\r\n              return (\r\n                <Stream\r\n                  key={`${keyParam}-${episode.title}`}\r\n                  episode={episode}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n      {allEpisode.length > initialQuantity && (\r\n        <button\r\n          onClick={streamShowMoreHandler}\r\n          className=\"stream-show-more-btn \"\r\n        >\r\n          Load More\r\n        </button>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\nexport default StreamList;\r\n","//components\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFire } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Popularity = ({ popularity }) => {\r\n  //pop range is negativ so we manage it from 100 to 0 not 0 to 100 and we see if it is less than 6 set it to 6 percentage.\r\n  //... it help us to show the fire even if the media is not popular\r\n  let popularityRange = 100 - ((popularity / 400000) * 100).toFixed(0);\r\n  if (popularityRange > 94) {\r\n    popularityRange = 94;\r\n  }\r\n  if (popularityRange < 0) {\r\n    popularityRange = 0;\r\n  }\r\n\r\n  return (\r\n    <div className=\"popularity-container\">\r\n      <div>\r\n        <div style={{ left: -popularityRange + \"%\" }}></div>\r\n      </div>\r\n      <FontAwesomeIcon\r\n        style={{ left: 94.8 - popularityRange + \"%\" }}\r\n        className=\"font-icon-pop\"\r\n        icon={faFire}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Popularity;\r\n","const ExternalLinks = ({ link }) => {\r\n  let bg;\r\n  switch (link.site) {\r\n    case \"Twitter\":\r\n    case \"Hulu\":\r\n    case \"Funimation\":\r\n      bg = \"blue\";\r\n      break;\r\n    case \"Official Site\":\r\n      bg = \"green\";\r\n      break;\r\n    case \"Youtube\":\r\n    case \"Tubi TV\":\r\n    case \"Netflix\":\r\n      bg = \"red\";\r\n      break;\r\n    case \"Crunchyroll\":\r\n    case \"VRV\":\r\n      bg = \"purple\";\r\n      break;\r\n    case \"AnimeLab\":\r\n    case \"Amazon\":\r\n      bg = \"yellow\";\r\n      break;\r\n    default:\r\n      bg = \"gray\";\r\n  }\r\n\r\n  return (\r\n    <li>\r\n      <a\r\n        className={`external-link  bg-${bg}-300\r\n               hover:bg-${bg}-500 active:bg-${bg}-600`}\r\n        href={link.url}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        {link.site}\r\n      </a>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ExternalLinks;\r\n","const Rank = ({ rank }) => {\r\n  //there is diferent rank types that we need to add specific color for any of them\r\n  let bgRank, bgBorder, rankRound;\r\n  if (rank.context.includes(\"most popular\")) {\r\n    bgRank = \"bg-green-200\";\r\n    bgBorder = \"border-green-600\";\r\n    rankRound = \"bg-green-400\";\r\n  } else {\r\n    bgRank = \"bg-yellow-200\";\r\n    bgBorder = \"border-yellow-600\";\r\n    rankRound = \"bg-yellow-400\";\r\n  }\r\n\r\n  return (\r\n    <li\r\n      className={`rank rank-container ${bgRank} ${\r\n        rank.allTime ? `border-r-4 border-l-4 ${bgBorder} ` : \"\"\r\n      } `}\r\n    >\r\n      <span className={`${rankRound} `}>#{rank.rank}</span>\r\n      {\" \" + rank.context}\r\n      <span className={` ${rank.year ? \"p-1\" : \"\"} `}>\r\n        {rank.year\r\n          ? `${rank.season ? rank.season.toLowerCase() : \"\"} ${rank.year}`\r\n          : \"\"}\r\n      </span>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Rank;\r\n","const Trailer = ({ embedId }) => (\r\n  <div className=\"video-responsive\">\r\n    <iframe\r\n      loading=\"lazy\"\r\n      width={853}\r\n      height={480}\r\n      src={`https://www.youtube.com/embed/${embedId}`}\r\n      frameBorder=\"0\"\r\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n      allowFullScreen\r\n      title=\"Embedded youtube\"\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default Trailer;\r\n","//libs\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { useApolloClient, gql } from \"@apollo/client\";\r\n//helpers & queries\r\nimport { unKnownPng } from \"../../utils/helpers\";\r\n//components\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Character = ({ char, animeID, mangaStaffID }) => {\r\n  const client = useApolloClient();\r\n  const linkRef = useRef(null);\r\n  //bcs manga hasn't any voice actore, we see if it is manga, then we replace the voice actore by the creator of manga\r\n  let charID, staffID;\r\n  charID = char.node.id;\r\n  if (char.voiceActors[0] === undefined) {\r\n    staffID = mangaStaffID;\r\n  } else {\r\n    staffID = char.voiceActors[0].id;\r\n  }\r\n\r\n  useEffect(() => {\r\n    linkRef.current.addEventListener(\"click\", charClickHandler);\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  //showing the progress bar for loading new page\r\n  const charClickHandler = () => {\r\n    client.writeQuery({\r\n      query: gql`\r\n        query WriteIsLoading {\r\n          loadingbar {\r\n            isLoading\r\n          }\r\n        }\r\n      `,\r\n      data: {\r\n        // Contains the data to write\r\n        loadingbar: {\r\n          __typename: \"LoadingBar\",\r\n          isLoading: 30,\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Link\r\n      ref={linkRef}\r\n      to={`/anime/${animeID}/character/${charID}/actor/${staffID}`}\r\n      className=\"char-container\"\r\n    >\r\n      <div className=\"char-image\">\r\n        <img\r\n          loading=\"lazy\"\r\n          width={64}\r\n          height={64}\r\n          src={char.node.image.medium}\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n      <div className=\"char-staff-info\" style={{ fontSize: \"9px\" }}>\r\n        <div className=\"char-name\">\r\n          <span>{char.node.name.full}</span>\r\n          <span>\r\n            {staffID !== mangaStaffID ? char.voiceActors[0].name.full : \"\"}\r\n          </span>\r\n        </div>\r\n        <div className=\"char-role\">\r\n          <span>{char.role.toLowerCase()}</span>\r\n          <span>\r\n            {staffID !== mangaStaffID ? char.voiceActors[0].languageV2 : \"\"}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"staff-image\">\r\n        <img\r\n          loading=\"lazy\"\r\n          width={64}\r\n          height={64}\r\n          src={\r\n            staffID !== mangaStaffID\r\n              ? char.voiceActors[0].image.medium\r\n              : unKnownPng\r\n          }\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Character;\r\n","//libs\r\nimport React, { useState } from \"react\";\r\n//components\r\nimport { motion } from \"framer-motion\";\r\nimport Character from \"./Character\";\r\n\r\nconst CharacterList = ({ characters, animeID, mangaStaffID }) => {\r\n  const [showMore, setShowMore] = useState({\r\n    stream: 5,\r\n  });\r\n\r\n  const streamShowMoreHandler = (e) => {\r\n    if (showMore.stream > 20) {\r\n      setShowMore({ stream: showMore.stream + 999 });\r\n      e.target.remove();\r\n    } else {\r\n      setShowMore({ stream: showMore.stream + 10 });\r\n    }\r\n    if (showMore.stream + 10 >= characters.length) {\r\n      e.target.remove();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"char-list-container\">\r\n      <motion.div>\r\n        {characters\r\n          .filter((_, index) => index < showMore.stream)\r\n          .map((char) => {\r\n            return (\r\n              <Character\r\n                key={char.node.id}\r\n                char={char}\r\n                animeID={animeID}\r\n                mangaStaffID={mangaStaffID}\r\n              />\r\n            );\r\n          })}\r\n      </motion.div>\r\n      {characters.length > 4 && (\r\n        <button\r\n          onClick={streamShowMoreHandler}\r\n          className=\"stream-show-more-btn\"\r\n        >\r\n          Load More\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default CharacterList;\r\n","//libs\r\nimport { useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useQuery } from \"@apollo/client\";\r\n//components\r\nimport AnimeList from \"../components/AnimeList\";\r\nimport CircleRate from \"../components/detailPage/CircleRate\";\r\nimport Errors from \"./Errors\";\r\nimport { Markup } from \"interweave\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimesCircle } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\r\n//helpers and queries\r\nimport { charQuery } from \"../utils/queries\";\r\nimport { showMoreLessBtn, unKnownPng, monthNames } from \"../utils/helpers\";\r\n\r\nconst CharacterDetail = ({ animeID, characterID, actorID }) => {\r\n  const staffContentShowLess = useRef(null);\r\n  const charContentShowLess = useRef(null);\r\n  const history = useHistory();\r\n\r\n  const modalCloseHandler = (e) => {\r\n    if (\r\n      e.target.classList.contains(\"character-page-shadow\") ||\r\n      e.target.classList.contains(\"modal-close\") ||\r\n      e.target.parentElement.classList.contains(\"modal-close\")\r\n    ) {\r\n      //managing 2 scrollbar\r\n      document.body.style.overflow = \"auto\";\r\n      history.push(`/anime/${animeID}`);\r\n    }\r\n  };\r\n\r\n  const { loading, error, data } = useQuery(charQuery, {\r\n    variables: {\r\n      char_id: characterID,\r\n      staff_id: actorID,\r\n    },\r\n  });\r\n\r\n  if (loading) {\r\n    return null;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"character-page-shadow\" onClick={modalCloseHandler}>\r\n        <div className=\"character-page-container\">\r\n          <span className=\"modal-close \">\r\n            <FontAwesomeIcon\r\n              className=\"fixed modal-close\"\r\n              icon={faTimesCircle}\r\n            />\r\n          </span>\r\n          <Errors errMsg={error.message} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  const character = data.Character;\r\n  const staff = data.Staff;\r\n  const charAnimeList = character.media.edges;\r\n  const staffAnimeList = staff.staffMedia.edges;\r\n\r\n  //circular rate components need a number from 0 to 100 so we need to make it first\r\n  let charFavouritesRange = ((character.favourites / 30000) * 100).toFixed(0);\r\n  let actorFavouritesRange = ((staff.favourites / 10000) * 100).toFixed(0);\r\n\r\n  // staff description\r\n  showMoreLessBtn(\r\n    staffContentShowLess,\r\n    \"show-more-btn staff-show-more-desc-btn\",\r\n    250\r\n  );\r\n\r\n  //character desciption\r\n  showMoreLessBtn(\r\n    charContentShowLess,\r\n    \"show-more-btn character-show-more-desc-btn\",\r\n    250\r\n  );\r\n\r\n  //managing 2 scrollbar\r\n  document.body.style.overflow = \"hidden\";\r\n\r\n  return (\r\n    <div className=\"character-page-shadow\" onClick={modalCloseHandler}>\r\n      <div className=\"character-page-container\">\r\n        <span className=\"modal-close \">\r\n          <FontAwesomeIcon className=\"fixed modal-close\" icon={faTimesCircle} />\r\n        </span>\r\n\r\n        <div className=\"character-info\">\r\n          <div>\r\n            <div className=\"character-image\">\r\n              <img\r\n                alt=\"\"\r\n                src={character.image.large ? character.image.large : unKnownPng}\r\n              />\r\n              <div>\r\n                <CircleRate\r\n                  rate={charFavouritesRange}\r\n                  symbol={faHeart}\r\n                  size={5}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"character-desc\">\r\n              <h1>\r\n                <strong> Name:</strong> <br />\r\n                {character.name.full}\r\n              </h1>\r\n              {character.age && (\r\n                <p>\r\n                  <strong>Age:</strong>\r\n                  <br />\r\n                  {character.age} years\r\n                </p>\r\n              )}\r\n              {character.dateOfBirth.day && (\r\n                <p>\r\n                  <strong>Date of Birth:</strong>\r\n                  <br />\r\n                  {character.dateOfBirth.day}{\" \"}\r\n                  {monthNames[character.dateOfBirth.month - 1]}\r\n                </p>\r\n              )}\r\n              {character.gender && (\r\n                <p>\r\n                  <strong>Gender:</strong>\r\n                  <br />\r\n                  {character.gender}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            {character.description && (\r\n              <div\r\n                className=\"description-character-markup\"\r\n                ref={charContentShowLess}\r\n              >\r\n                <Markup content={character.description} />\r\n              </div>\r\n            )}\r\n            {charAnimeList[0] && (\r\n              <div className=\"character-media-list\">\r\n                <h3>Character media</h3>\r\n                {\r\n                  <AnimeList\r\n                    allAnimeData={charAnimeList}\r\n                    colsInRow={3}\r\n                    initialQuantity={3}\r\n                    keyParam={\"charMedia\"}\r\n                  />\r\n                }\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"staff-info\">\r\n          <div>\r\n            <div className=\"staff-desc\">\r\n              <h1>\r\n                <strong> Name:</strong> <br />\r\n                {staff.name.full}\r\n              </h1>\r\n              {staff.age && (\r\n                <p>\r\n                  <strong>Age:</strong>\r\n                  <br />\r\n                  {staff.age} years\r\n                </p>\r\n              )}\r\n              {staff.dateOfBirth.day && (\r\n                <p>\r\n                  <strong>Date of Birth:</strong>\r\n                  <br />\r\n                  {staff.dateOfBirth.day}{\" \"}\r\n                  {monthNames[staff.dateOfBirth.month - 1]}\r\n                </p>\r\n              )}\r\n              {staff.gender && (\r\n                <p>\r\n                  <strong>Gender:</strong>\r\n                  <br />\r\n                  {staff.gender}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div className=\"staff-image\">\r\n              <img\r\n                alt=\"\"\r\n                src={staff.image.large ? staff.image.large : unKnownPng}\r\n              />\r\n              <div>\r\n                <CircleRate\r\n                  rate={actorFavouritesRange}\r\n                  symbol={faHeart}\r\n                  size={5}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            {staff.description && (\r\n              <div\r\n                className=\"description-staff-markup\"\r\n                ref={staffContentShowLess}\r\n              >\r\n                <Markup content={staff.description} />\r\n              </div>\r\n            )}\r\n            {staffAnimeList[0] && (\r\n              <div className=\"staff-media-list\">\r\n                <h3>Staff media</h3>\r\n                {\r\n                  <AnimeList\r\n                    allAnimeData={staffAnimeList}\r\n                    colsInRow={3}\r\n                    initialQuantity={3}\r\n                    keyParam={\"staffMedia\"}\r\n                  />\r\n                }\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CharacterDetail;\r\n","//libs\r\nimport React, { useRef, useEffect } from \"react\";\r\nimport { decode } from \"html-entities\";\r\n//components\r\nimport { motion } from \"framer-motion\";\r\nimport { Markup } from \"interweave\";\r\nimport CircleRate from \"./CircleRate\";\r\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\r\n//helpers and queries\r\nimport { showMoreLessBtn, unKnownPng } from \"../../utils/helpers\";\r\n\r\nconst Review = ({ review }) => {\r\n  const reviewContentShowLess = useRef(null);\r\n\r\n  //the review's body are a pure shit . so we need to clean it first\r\n  //...we use reg1 any header like [__header__] to an a tag\r\n  //...we use reg3 to add lazy loading to images\r\n  //...we use reg2 to decode markdowns and remove <pre></pre> and <code></code> tags bcs they make problem for page styles\r\n  let reviewText = review.body;\r\n  let reg1 = /\\[(.*?)\\]\\((.*?)\\)/g;\r\n  reviewText = reviewText.replace(reg1, \"<a href='$2'>$1</a>\");\r\n  let reg3 = /src='(.*?)'|src=\"(.*?)\"/g;\r\n  reviewText = reviewText.replace(\r\n    reg3,\r\n    \" src='$1' loading='lazy' height='270' \"\r\n  );\r\n  let reg2 = /<pre>/;\r\n  if (reg2.test(reviewText)) {\r\n    reviewText = decode(reviewText);\r\n    reviewText = reviewText.replaceAll(/__|\\*|<\\/?code>|<\\/?pre>/g, \"\");\r\n  }\r\n\r\n  let date = new Date(review.createdAt * 1000);\r\n  date = `${date.getFullYear()}/${date.getMonth()}/${date.getDay()}`;\r\n\r\n  useEffect(() => {\r\n    showMoreLessBtn(\r\n      reviewContentShowLess,\r\n      \"show-more-btn showMoreReviewBtn\",\r\n      150\r\n    );\r\n  }, [reviewContentShowLess]);\r\n\r\n  //bcs we show rate as a percent of 100 so we need to remove anything more than 100\r\n  let rate;\r\n  if (review.rating >= 100) {\r\n    rate = 100;\r\n  } else {\r\n    rate = review.rating;\r\n  }\r\n\r\n  // I saw an avatar that it has 404 error.\r\n  //...so we can use this to see if the avatars have error then we replace the src with our default avatar\r\n  const avatarErrorHandler = (e) => {\r\n    e.target.onerror = null;\r\n    e.target.src = unKnownPng;\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"review-card-container \"\r\n      animate={{ opacity: 1, transition: { duration: 2 } }}\r\n      initial={{ opacity: 0 }}\r\n    >\r\n      <div className=\"reviewer-container\">\r\n        <div>\r\n          <div className=\"review-user-info\">\r\n            <img\r\n              loading=\"lazy\"\r\n              width={80}\r\n              height={80}\r\n              alt=\"\"\r\n              src={review.user.avatar.medium}\r\n              onError={avatarErrorHandler}\r\n            />\r\n            <h4>{review.user.name}</h4>\r\n          </div>\r\n          <div className=\"review-rate\">\r\n            <div className=\"review-score\">\r\n              <CircleRate rate={review.score} size={4} />\r\n              <br />\r\n            </div>\r\n            <div className=\"review-popularity\">\r\n              <CircleRate rate={rate} symbol={faHeart} size={4} />\r\n\r\n              <p>this review</p>\r\n              <p>\r\n                <strong>{review.ratingAmount}</strong> rates\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"review-date\">{date}</div>\r\n      </div>\r\n      {review.body ? (\r\n        <div\r\n          className=\"description-character-markup review-body\"\r\n          ref={reviewContentShowLess}\r\n        >\r\n          <Markup content={reviewText} />\r\n        </div>\r\n      ) : (\r\n        <div className=\"description-character-markup review-summary\">\r\n          <Markup content={review.summary} />\r\n        </div>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default Review;\r\n","//libs\r\nimport React, { useState } from \"react\";\r\n//components\r\nimport Review from \"./Review\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst ReviewList = ({ allReviewData, initialQuantity, keyParam }) => {\r\n  const [showMore, setShowMore] = useState({\r\n    review: initialQuantity,\r\n  });\r\n\r\n  const reviewShowMoreHandler = (e) => {\r\n    if (showMore.review > 100) {\r\n      setShowMore({ ...showMore, review: showMore.review + 999 });\r\n      e.target.style.display = \"none\";\r\n    } else {\r\n      setShowMore({ ...showMore, review: showMore.review + 3 });\r\n    }\r\n    if (showMore.review + 3 >= allReviewData.length) {\r\n      e.target.style.display = \"none\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div className=\"review-list-container\">\r\n      <div className=\"anime-list-container\">\r\n        <div>\r\n          {allReviewData\r\n            .filter((_, index) => index <= showMore.review - 1)\r\n            .map((review) => {\r\n              return (\r\n                <Review\r\n                  key={`${keyParam}-${review.node.id}`}\r\n                  review={review.node}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n\r\n      {allReviewData.length > initialQuantity && (\r\n        <button\r\n          onClick={reviewShowMoreHandler}\r\n          className=\"stream-show-more-btn\"\r\n        >\r\n          Load More\r\n        </button>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\nexport default ReviewList;\r\n","//libs\r\nimport React from \"react\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { useLocation, useParams } from \"react-router-dom\";\r\nimport { useApolloClient, gql } from \"@apollo/client\";\r\n//components\r\nimport AnimeList from \"../components/AnimeList\";\r\nimport StreamList from \"../components/detailPage/StreamList\";\r\nimport CircleRate from \"../components/detailPage/CircleRate\";\r\nimport Popularity from \"../components/detailPage/Popularity\";\r\nimport ExternalLinks from \"../components/detailPage/ExternalLinks\";\r\nimport Rank from \"../components/detailPage/Rank\";\r\nimport Trailer from \"../components/detailPage/Trailer\";\r\nimport CharacterList from \"../components/detailPage/CharacterList\";\r\nimport CharacterDetail from \"./CharacterDetail\";\r\nimport ReviewList from \"../components/detailPage/ReviewList\";\r\nimport RecomList from \"../components/detailPage/RecomList\";\r\nimport Loading from \"./Loading\";\r\nimport Errors from \"./Errors\";\r\nimport { Markup } from \"interweave\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faHeart, faClock } from \"@fortawesome/free-solid-svg-icons\";\r\n//helpers and queries\r\nimport { hexToRgbA, secondsToDhms } from \"../utils/helpers\";\r\nimport { detailQuery } from \"../utils/queries\";\r\n\r\nconst AnimeDetail = () => {\r\n  const params = useParams();\r\n  const location = useLocation();\r\n\r\n  //for cloasing the progress bar on load\r\n  const client = useApolloClient();\r\n  client.writeQuery({\r\n    query: gql`\r\n      query WriteIsLoading {\r\n        loadingbar {\r\n          isLoading\r\n        }\r\n      }\r\n    `,\r\n    data: {\r\n      // Contains the data to write\r\n      loadingbar: {\r\n        __typename: \"LoadingBar\",\r\n        isLoading: 80,\r\n      },\r\n    },\r\n  });\r\n\r\n  //bcs of scroll behinde of the modal back to normal when modal close\r\n  document.body.style.overflow = \"auto\";\r\n\r\n  //check if we are in the character page or not\r\n  const id = Number(params.animeID);\r\n  const charID = location.pathname.split(\"/\");\r\n  const isCharacterPage = charID[3] === \"character\";\r\n\r\n  const { loading, error, data } = useQuery(detailQuery, {\r\n    variables: {\r\n      id: id,\r\n    },\r\n  });\r\n\r\n  if (loading) {\r\n    return <Loading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Errors errMsg={error.message} />;\r\n  }\r\n\r\n  const aData = data.Media;\r\n  const title = aData.title.english ? aData.title.english : aData.title.romaji;\r\n  const description = aData.description;\r\n  const startDate = aData.startDate;\r\n  const endDate = aData.endDate;\r\n  const banner = aData.bannerImage;\r\n  const characters = aData.characters.edges;\r\n  const coverImage = aData.coverImage;\r\n  const animeColor30 = hexToRgbA(coverImage.color, 0.3);\r\n  const externalLinks = aData.externalLinks;\r\n  const genres = aData.genres;\r\n  const rankings = aData.rankings;\r\n  const relations = aData.relations.edges;\r\n  const reviews = aData.reviews.edges;\r\n  const streamingEpisodes = aData.streamingEpisodes;\r\n  const studios = aData.studios.edges;\r\n  const tags = aData.tags;\r\n  const nextAiringEpisode = aData.nextAiringEpisode;\r\n  const popularity = aData.popularity;\r\n\r\n  //to passing it to the circular rate component we need to make it a number between 0 to 100\r\n  let favouritesRange = ((aData.favourites / 30000) * 100).toFixed(0);\r\n  if (favouritesRange > 100) {\r\n    favouritesRange = 100;\r\n  }\r\n  if (favouritesRange < 1) {\r\n    favouritesRange = 1;\r\n  }\r\n  //to check it the start date and end date are same or not (for movies we dont need to show both dates)\r\n  const isOneDate =\r\n    endDate.year === startDate.year &&\r\n    endDate.month === startDate.month &&\r\n    endDate.day === startDate.day;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {isCharacterPage && (\r\n        <CharacterDetail\r\n          animeID={charID[2]}\r\n          characterID={charID[4]}\r\n          actorID={charID[6]}\r\n        />\r\n      )}\r\n\r\n      <div className=\"detail-grid-container detail-page-container\">\r\n        <div\r\n          className=\"d-header\"\r\n          style={{\r\n            backgroundImage: `url(${\r\n              banner ?? process.env.PUBLIC_URL + \"/media/defaultheader.png\"\r\n            })`,\r\n          }}\r\n        >\r\n          <div className=\"banner-inside\">\r\n            <h1\r\n              className=\"detail-title\"\r\n              style={{ backgroundColor: `${animeColor30}` }}\r\n            >\r\n              {title}\r\n            </h1>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-sidebar\">\r\n          <img\r\n            alt=\"\"\r\n            className=\"detail-cover-image \"\r\n            style={{\r\n              borderColor: `${animeColor30}`,\r\n              backgroundColor: coverImage.color,\r\n            }}\r\n            src={coverImage.large}\r\n          />\r\n          <h2>{title}</h2>\r\n          <div className=\"format-side-detail\">{aData.format}</div>\r\n          <div className=\"detail-side-info\">\r\n            {aData.season && aData.season.toLowerCase()}{\" \"}\r\n            {aData.seasonYear && aData.seasonYear}\r\n            {aData.episodes && ` | ${aData.episodes} Episodes `}\r\n            {aData.duration &&\r\n              ` | ${secondsToDhms(aData.duration * 60, \"dhm\")}`}\r\n            {aData.volumes && `${aData.volumes} Volumes | `}\r\n            {aData.chapters && `${aData.chapters} Chapters`}\r\n          </div>\r\n          <div className=\"detail-side-genres-container\">\r\n            {genres.map((gen) => {\r\n              return <div key={gen}>#{gen}</div>;\r\n            })}\r\n          </div>\r\n          <h4>Date</h4> <hr />\r\n          <div className=\"detail-side-date\">\r\n            <span>\r\n              {\" \"}\r\n              {`${startDate.year}${\r\n                startDate.month\r\n                  ? \"/\" + startDate.month + \"/\" + startDate.day\r\n                  : \"\"\r\n              }`}\r\n            </span>\r\n            {!isOneDate && <div>-</div>}\r\n            {!isOneDate && (\r\n              <span>\r\n                {endDate.year\r\n                  ? endDate.year +\r\n                    (endDate.month\r\n                      ? \"/\" + endDate.month + \"/\" + endDate.day\r\n                      : \"\")\r\n                  : \"Present\"}\r\n              </span>\r\n            )}\r\n          </div>\r\n          {nextAiringEpisode && (\r\n            <div className=\"detail-side-airing\">\r\n              <h4>Airing</h4> <hr />\r\n              <div>\r\n                Episode {nextAiringEpisode.episode}\r\n                <span>\r\n                  <FontAwesomeIcon icon={faClock} />{\" \"}\r\n                  {secondsToDhms(nextAiringEpisode.timeUntilAiring, \"dhm\")}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {popularity !== undefined && (\r\n            <div className=\"detail-side-pop\">\r\n              <h4>Popularity</h4>\r\n              <Popularity popularity={popularity} />\r\n            </div>\r\n          )}\r\n          {rankings[0] && (\r\n            <div className=\"d-ranking \">\r\n              <h4>Ranking</h4>\r\n              <hr />\r\n              <ul>\r\n                {rankings.map((rank) => {\r\n                  return <Rank key={rank.id} rank={rank} />;\r\n                })}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          {studios[0] && (\r\n            <div>\r\n              <h4>Studios</h4>\r\n              <hr />\r\n              <div className=\"detail-side-studios\">\r\n                {studios\r\n                  .filter((e) => e.isMain)\r\n                  .map((st) => {\r\n                    return <span key={st.node.id}>{st.node.name}</span>;\r\n                  })}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {studios[0] && (\r\n            <div className=\"detail-side-producers\">\r\n              <h4>Producers</h4>\r\n              <hr />\r\n              <div>\r\n                {studios\r\n                  .filter((e) => !e.isMain)\r\n                  .map((st) => {\r\n                    return <span key={st.node.id}>{st.node.name}</span>;\r\n                  })}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {aData.source && (\r\n            <div>\r\n              <h4>Source</h4>\r\n              <hr />\r\n              <div className=\"detail-side-source\">{aData.source}</div>\r\n            </div>\r\n          )}\r\n          {characters[0] && (\r\n            <div>\r\n              <h4>Characters</h4>\r\n              <hr />\r\n              <CharacterList\r\n                characters={characters}\r\n                mangaStaffID={aData.staff.edges[0].node.id}\r\n                animeID={id}\r\n              />\r\n            </div>\r\n          )}\r\n          {externalLinks[0] && (\r\n            <div>\r\n              <h4>Links</h4>\r\n              <hr />\r\n              <ul>\r\n                {externalLinks.map((link) => {\r\n                  return <ExternalLinks key={link.id} link={link} />;\r\n                })}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"d-main\">\r\n          <div className=\"detail-main-score\">\r\n            <CircleRate rate={aData.meanScore} size={5} />\r\n          </div>\r\n          <div className=\"detail-main-fav\">\r\n            <CircleRate rate={favouritesRange} symbol={faHeart} size={5} />\r\n          </div>\r\n          <div className=\"detail-main-desc\">\r\n            <Markup content={description} />\r\n          </div>\r\n          <br />\r\n          <br />\r\n          {aData.trailer && <Trailer embedId={aData.trailer.id} />} <br />\r\n          <h4>tags:</h4>\r\n          <div className=\"detail-main-tag\">\r\n            {tags &&\r\n              tags\r\n                .filter((_, index) => index < 6)\r\n                .map((tag) => {\r\n                  return (\r\n                    <span key={tag.name}>\r\n                      <span>{tag.name}</span>\r\n                      <span>{tag.rank}%</span>\r\n                    </span>\r\n                  );\r\n                })}\r\n          </div>\r\n        </div>\r\n\r\n        {relations[0] && (\r\n          <div className=\"d-relate\">\r\n            <h4>Relations</h4>\r\n            <hr />\r\n            <AnimeList\r\n              allAnimeData={relations}\r\n              colsInRow={4}\r\n              initialQuantity={4}\r\n              keyParam={\"relate\"}\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"d-watch \">\r\n          {streamingEpisodes[0] && (\r\n            <div className=\"detail-watch-stream\">\r\n              <h4>Stream Watch</h4>\r\n              <hr />\r\n              <StreamList\r\n                allEpisode={streamingEpisodes}\r\n                colsInRow={4}\r\n                initialQuantity={4}\r\n                keyParam={\"stream\"}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {reviews[0] && (\r\n            <div className=\"detail-watch-reviews\">\r\n              <h4>Reviews</h4>\r\n              <hr />\r\n              <ReviewList\r\n                allReviewData={reviews}\r\n                initialQuantity={2}\r\n                keyParam={\"review\"}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"d-recom\">\r\n          <RecomList animeID={id} keyParam={\"recom\"} initialQuantity={7} />\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default AnimeDetail;\r\n","//components\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nconst CircleRate = ({ rate, symbol, size }) => {\r\n  //there is 2 circular div that we handle the percentage with the gradient. we also change the color with percentage\r\n  let grad, bg;\r\n  if (rate === null) {\r\n    rate = 0;\r\n  }\r\n  if (rate <= 25) {\r\n    bg = \"bg-red-500\";\r\n    grad = `linear-gradient(${\r\n      (rate / 100) * 360 + 90\r\n    }deg, transparent 50%, rgb(212, 212, 212) 50%), linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  } else if (rate < 50) {\r\n    bg = \"bg-yellow-500\";\r\n    grad = `linear-gradient(${\r\n      (rate / 100) * 360 + 90\r\n    }deg, transparent 50%, rgb(212, 212, 212) 50%), linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  } else if (rate === 50) {\r\n    bg = \"bg-yellow-300\";\r\n    grad = `linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  } else if (rate >= 100) {\r\n    rate = 100;\r\n    bg = \"bg-green-600\";\r\n    grad = \"none\";\r\n  } else if (rate <= 75) {\r\n    bg = \"bg-green-300\";\r\n    grad = `linear-gradient(${\r\n      ((rate - 50) / 100) * 360 + 90\r\n    }deg, transparent 50%, rgba(110,231,183,1) 50%), linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  } else {\r\n    bg = \"bg-green-500\";\r\n    grad = `linear-gradient(${\r\n      ((rate - 50) / 100) * 360 + 90\r\n    }deg, transparent 50%, rgba(16,185,129,1) 50%), linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundImage: grad,\r\n        width: `${size}rem`,\r\n        height: `${size}rem`,\r\n        borderRadius: \"50%\",\r\n      }}\r\n      className={`${bg} circle-rate-container group group-hover:animate-reversecycler`}\r\n    >\r\n      <div\r\n        className=\"group-hover:animate-cycler\"\r\n        style={{\r\n          width: `${size - 1}rem`,\r\n          height: `${size - 1}rem`,\r\n          borderRadius: \"50%\",\r\n        }}\r\n      >\r\n        {symbol ? (\r\n          <div className=\"rate-symbol\">\r\n            <FontAwesomeIcon\r\n              icon={symbol}\r\n              className={`${\r\n                size === 5 ? \"text-6xl\" : size === 4 ? \"text-5xl \" : \"\"\r\n              } text-red-500`}\r\n            />\r\n            <div\r\n              className={`${\r\n                size === 5 ? \"text-lg\" : size === 4 ? \"text-sm\" : \"\"\r\n              } text-white absolute`}\r\n              style={{\r\n                right: \"50%\",\r\n                top: \"50%\",\r\n                transform: \"translate(50%, -50%)\",\r\n              }}\r\n            >\r\n              {rate}%\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <span className=\"score-num\">\r\n            <span>score</span>\r\n            <span\r\n              className={`${\r\n                size === 5 ? \"text-2xl\" : size === 4 ? \"text-base\" : \"\"\r\n              }`}\r\n            >\r\n              {rate}%\r\n            </span>\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CircleRate;\r\n","// convert hex to rgba\r\nexport const hexToRgbA = (hex, opacity) => {\r\n  let c;\r\n  if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\r\n    c = hex.substring(1).split(\"\");\r\n    if (c.length === 3) {\r\n      c = [c[0], c[0], c[1], c[1], c[2], c[2]];\r\n    }\r\n    c = \"0x\" + c.join(\"\");\r\n    return (\r\n      \"rgba(\" +\r\n      [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(\",\") +\r\n      `,${opacity})`\r\n    );\r\n  }\r\n  return \"rgba(0,0,0,0.2)\";\r\n};\r\n\r\nexport const secondsToDhms = (seconds, dhms) => {\r\n  seconds = Number(seconds);\r\n  let d = Math.floor(seconds / (3600 * 24));\r\n  let h = Math.floor((seconds % (3600 * 24)) / 3600);\r\n  let m = Math.floor((seconds % 3600) / 60);\r\n  let s = Math.floor(seconds % 60);\r\n  let dDisplay = d > 0 ? d + \"d \" : \"\";\r\n  let hDisplay = h > 0 ? h + \"h \" : \"\";\r\n  let mDisplay = m > 0 ? m + \"min \" : \"\";\r\n  let sDisplay = s > 0 ? s + \"s\" : \"\";\r\n  if (dhms === \"dhms\") {\r\n    return dDisplay + hDisplay + mDisplay + sDisplay;\r\n  } else if (dhms === \"dhm\") {\r\n    return dDisplay + hDisplay + mDisplay;\r\n  }\r\n};\r\n\r\nexport const showMoreLessBtn = (refElement, extraClassName, height) => {\r\n  return setTimeout(() => {\r\n    if (refElement.current) {\r\n      if (\r\n        refElement.current.firstElementChild.offsetHeight > `${height + 100}`\r\n      ) {\r\n        refElement.current.firstElementChild.style.height = `${height}px`;\r\n        refElement.current.firstElementChild.style.overflow = \"hidden\";\r\n        refElement.current.firstElementChild.style.position = \"relative\";\r\n        const showMoreBtn = document.createElement(\"button\");\r\n        showMoreBtn.className = extraClassName;\r\n        showMoreBtn.textContent = \"Show More\";\r\n        refElement.current.firstElementChild.lastElementChild.after(\r\n          showMoreBtn\r\n        );\r\n\r\n        showMoreBtn.addEventListener(\"click\", () => {\r\n          showMoreBtn.style.display = \"none\";\r\n          refElement.current.firstElementChild.style.height = \"100%\";\r\n        });\r\n      }\r\n    }\r\n  }, 100);\r\n};\r\n\r\nexport const unKnownPng = process.env.PUBLIC_URL + \"/media/defaultavatar.png\";\r\n\r\n\r\n\r\n  export const monthNames = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ];\r\n\r\n","//libs\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useApolloClient, gql } from \"@apollo/client\";\r\n//components\r\nimport { Markup } from \"interweave\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faThumbsUp, faThumbsDown } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst Recom = ({ recom, widthParam }) => {\r\n  const history = useHistory();\r\n  const client = useApolloClient();\r\n\r\n  //check to see that this components render in home page or detail page\r\n  // optional chaning and nullish coalescing oprator myObj?.prop ?? \"default\"\r\n  //... by this way we check if recom.node is undefined or nall and if yes then read data fom recom.media\r\n  const recMedia = recom.node?.mediaRecommendation ?? recom.media;\r\n  const rating = recom.node?.rating ?? recom.rating;\r\n\r\n  //showing progress bar on click\r\n  const animeCardClickHandler = (e) => {\r\n    e.preventDefault();\r\n    client.writeQuery({\r\n      query: gql`\r\n        query WriteIsLoading {\r\n          loadingbar {\r\n            isLoading\r\n          }\r\n        }\r\n      `,\r\n      data: {\r\n        // Contains the data to write\r\n        loadingbar: {\r\n          __typename: \"LoadingBar\",\r\n          isLoading: 30,\r\n        },\r\n      },\r\n    });\r\n\r\n    //we set timeout to show the progressbar before routing , if we push immediately it doesn't show progressbar\r\n    setTimeout(() => {\r\n      history.push(`/anime/${recMedia.id}`);\r\n    }, 500);\r\n  };\r\n\r\n  //to remove extra data from description\r\n  let description = recMedia.description;\r\n  description = description.substring(0, 300);\r\n  return (\r\n    <motion.a\r\n      draggable={true}\r\n      href={`/anime/${recMedia.id}`}\r\n      onClick={animeCardClickHandler}\r\n      className={` ${\r\n        widthParam ? \"w-full ssm:w-8/12 sm:w-11/12 my-3\" : \"w-60 mx-3\"\r\n      }  recom-container`}\r\n    >\r\n      <div className=\"recom-detail\">\r\n        <img\r\n          loading=\"lazy\"\r\n          width={160}\r\n          height={224}\r\n          alt=\"\"\r\n          src={recMedia.coverImage.large}\r\n          style={{ backgroundColor: recMedia.coverImage.color }}\r\n        />\r\n        <div className=\"recom-info\">\r\n          <p className=\"line-clamp-4\">\r\n            <b>Title:</b>\r\n            <br />{\" \"}\r\n            {recMedia.title.english\r\n              ? recMedia.title.english\r\n              : recMedia.title.romaji}\r\n          </p>\r\n          {recMedia.format && (\r\n            <p>\r\n              <b>Format:</b>\r\n              <br /> {recMedia.format.toLowerCase()}\r\n            </p>\r\n          )}\r\n          {recMedia.source && (\r\n            <p>\r\n              <b>Source:</b>\r\n              <br /> {recMedia.source.toLowerCase()}\r\n            </p>\r\n          )}\r\n          {recMedia.status && (\r\n            <p>\r\n              <b>Status:</b>\r\n              <br /> {recMedia.status.toLowerCase()}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {recMedia.description && (\r\n        <div className=\"recom-desc line-clamp-5\">\r\n          <b>Description:</b> <Markup content={description} />\r\n        </div>\r\n      )}\r\n      <div className=\"recom-rating\">\r\n        {rating !== undefined &&\r\n          (rating <= 0 ? (\r\n            <div className=\"red-rate\">\r\n              {rating} <FontAwesomeIcon icon={faThumbsDown} />\r\n            </div>\r\n          ) : (\r\n            <div className=\"green-rate\">\r\n              +{rating} <FontAwesomeIcon icon={faThumbsUp} />\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </motion.a>\r\n  );\r\n};\r\n\r\nexport default Recom;\r\n","//libs\r\nimport { useApolloClient, gql } from \"@apollo/client\";\r\nimport { useHistory } from \"react-router-dom\";\r\n//components\r\nimport { motion } from \"framer-motion\";\r\nimport CircleRate from \"./detailPage/CircleRate\";\r\n\r\nconst Anime = ({ anime }) => {\r\n  const client = useApolloClient();\r\n  const history = useHistory();\r\n\r\n  //to showing progress bar on click\r\n  const animeCardClickHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    client.writeQuery({\r\n      query: gql`\r\n        query WriteIsLoading {\r\n          loadingbar {\r\n            isLoading\r\n          }\r\n        }\r\n      `,\r\n      data: {\r\n        // Contains the data to write\r\n        loadingbar: {\r\n          __typename: \"LoadingBar\",\r\n          isLoading: 30,\r\n        },\r\n      },\r\n    });\r\n\r\n    setTimeout(() => {\r\n      history.push(`/anime/${anime.id}`);\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <motion.a\r\n      href={`/anime/${anime.id}`}\r\n      onClick={animeCardClickHandler}\r\n      className=\"anime-card-container group hover-card-num-1\"\r\n      animate={{ opacity: 1, transition: { duration: 1 } }}\r\n      initial={{ opacity: 0 }}\r\n    >\r\n      {anime.averageScore !== undefined && (\r\n        <div\r\n          className=\"anime-circle-rate transform translate-x-4 -translate-y-4 \r\n    group-hover:translate-y-0.5 group-hover:-translate-x-0.5 \"\r\n        >\r\n          <CircleRate rate={anime.averageScore} size={4} />\r\n        </div>\r\n      )}\r\n\r\n      <img\r\n        loading=\"lazy\"\r\n        height={224}\r\n        alt=\"\"\r\n        src={anime.coverImage.large}\r\n        style={{ backgroundColor: anime.coverImage.color }}\r\n      />\r\n      <div\r\n        className=\"anime-info\r\n       \"\r\n      >\r\n        <div className=\" bg-yellow-300 \">{anime.format}</div>\r\n        <div className=\" bg-green-300 \">{anime.source}</div>\r\n        <div className=\" bg-red-300 \">{anime.status}</div>\r\n      </div>\r\n      <h3 className=\"line-clamp-2 \">\r\n        {anime.title.english !== null\r\n          ? anime.title.english\r\n          : anime.title.romaji}\r\n      </h3>\r\n    </motion.a>\r\n  );\r\n};\r\n\r\nexport default Anime;\r\n","//libs\r\nimport React, { useState } from \"react\";\r\n//components\r\nimport Anime from \"./Anime\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst AnimeList = ({ allAnimeData, initialQuantity, colsInRow, keyParam }) => {\r\n  const [showMore, setShowMore] = useState({\r\n    stream: initialQuantity,\r\n  });\r\n\r\n  //manage columns in diferent size (we cant do this in css bcs we change grid templates for mobile and tablet)\r\n  let gridColsTemp = `grid-cols-2 ssm:grid-cols-${colsInRow - 1} lg:grid-cols-${\r\n    colsInRow - 1\r\n  } xl:grid-cols-${colsInRow}`;\r\n\r\n  const streamShowMoreHandler = (e) => {\r\n    if (showMore.stream > 30) {\r\n      setShowMore({ ...showMore, stream: showMore.stream + 999 });\r\n      e.target.style.display = \"none\";\r\n    } else {\r\n      setShowMore({ ...showMore, stream: showMore.stream + 10 });\r\n    }\r\n    if (showMore.stream + 10 >= allAnimeData.length) {\r\n      e.target.style.display = \"none\";\r\n    }\r\n  };\r\n\r\n  // maintain the array for duplicate elements\r\n  let counterAnime = [];\r\n  let trimedAllAnimeData = allAnimeData.filter((anime) => {\r\n    let anim = anime.id !== undefined ? anime : anime.node;\r\n    if (!counterAnime.includes(anim.id)) {\r\n      counterAnime.push(anim.id);\r\n      if (anime !== undefined) {\r\n        return anime;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n\r\n  return (\r\n    <motion.div className=\"pb-10\">\r\n      <div className=\"anime-list-container\">\r\n        <motion.div className={`anime-list ${gridColsTemp}`}>\r\n          {trimedAllAnimeData\r\n            .filter((_, index) => index <= showMore.stream - 1)\r\n            .map((anime) => {\r\n              //check where the data come from node or media\r\n              const animeData = anime.id !== undefined ? anime : anime.node;\r\n              return (\r\n                <Anime key={`${keyParam}-${animeData.id}`} anime={animeData} />\r\n              );\r\n            })}\r\n        </motion.div>\r\n      </div>\r\n      {allAnimeData.length > initialQuantity && (\r\n        <button\r\n          onClick={streamShowMoreHandler}\r\n          className=\"stream-show-more-btn\"\r\n        >\r\n          Load More\r\n        </button>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\nexport default AnimeList;\r\n","//libs\r\nimport React, { useState, useRef } from \"react\";\r\nimport { useQuery } from \"@apollo/client\";\r\n//components\r\nimport Recom from \"./Recom\";\r\nimport { faChevronCircleRight } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n//helpers & queries\r\nimport { recomListQuery } from \"../../utils/queries\";\r\n// import Errors from '../../pages/Errors';\r\n\r\nconst RecomList = ({ allRecom, animeID, initialQuantity, keyParam }) => {\r\n  const rightLeftScroll = useRef(null);\r\n  const wastefulCover = useRef(null);\r\n  const [showMore, setShowMore] = useState({\r\n    recommend: initialQuantity,\r\n  });\r\n\r\n  //check to see if we are in small device or large one to decide how many data should load\r\n  const isSmallDevice = document.documentElement.clientWidth <= 768;\r\n  //this magic numbers manage the scroll in small devices like 320px width\r\n  const magicNum1 = 250;\r\n  const magicNum2 = isSmallDevice ? 264 : 264 * 2;\r\n  const magicNum3 = 275;\r\n\r\n  //check to see if we are in home page or detail page and bcs this will throwing error for us, so we mock it\r\n  //... to get the data of id 7 if we are in home page but we dont show this data\r\n  let id;\r\n  if (animeID) {\r\n    id = animeID;\r\n  } else {\r\n    id = 7;\r\n  }\r\n  const { loading, error, data } = useQuery(recomListQuery, {\r\n    variables: {\r\n      id: id,\r\n    },\r\n  });\r\n\r\n  if (loading) {\r\n    return null;\r\n  }\r\n\r\n  if (error) {\r\n    //we comented next line bcs it show the Errors page in middle of the oter pages, we just ignore this error if happened\r\n    // return <Errors errMsg={error.message} />;\r\n    return null;\r\n  }\r\n\r\n  //we check to see if the data come from the parent or from the graphql request\r\n  let allRecomData;\r\n  if (allRecom) {\r\n    allRecomData = allRecom;\r\n  } else {\r\n    allRecomData = data.Media.recommendations.edges;\r\n  }\r\n\r\n  // START of slider : isdown check the mouse key down , startx is the scrill left at the beggining of mouse key down and scroll left is the current scroll left\r\n  let isDown = false;\r\n  let startx, scrollLeft;\r\n\r\n  //on mouse down we set startx and scrollLeft , then we update scrollLeft later but we dont update startx bcs it is constant from a click down to click up\r\n  const recSliderMouseDownHandler = (e) => {\r\n    e.preventDefault();\r\n    isDown = true;\r\n    startx = e.pageX - rightLeftScroll.current.offsetLeft;\r\n    scrollLeft = rightLeftScroll.current.scrollLeft;\r\n  };\r\n\r\n  //we put wastfullCover to avoid triger click action . bcs click happen wen we mouse down and mouse up on the same object\r\n  //... so this 0 opacity cover help us to don't mouse up at the same object\r\n  const recSliderMouseLeaveHandler = () => {\r\n    isDown = false;\r\n    wastefulCover.current.style.display = \"none\";\r\n  };\r\n\r\n  //we put wastfullCover to avoid triger click action . bcs click happen wen we mouse down and mouse up on the same object\r\n  //... so this 0 opacity cover help us to don't mouse up at the same object\r\n  // we also update the state, we load all the data if user dragging the slider\r\n  const recSliderMouseUpHandler = () => {\r\n    isDown = false;\r\n\r\n    wastefulCover.current.style.display = \"none\";\r\n\r\n    setShowMore({ recommend: allRecomData.length });\r\n  };\r\n\r\n  const recSliderMouseMoveHandler = (e) => {\r\n    if (!isDown) return;\r\n    e.preventDefault();\r\n    const x = e.pageX - rightLeftScroll.current.offsetLeft;\r\n    const walk = (x - startx) * 1.5;\r\n    rightLeftScroll.current.scrollLeft = scrollLeft - walk;\r\n    wastefulCover.current.style.display = \"block\";\r\n  };\r\n\r\n  //in scroll handler btn we use our magic number to manage the scroll by using math.round\r\n  //...we also load more data if user click on the right button. the number of new data is depend on size of the device\r\n  const rightScrollHandler = () => {\r\n    let recLeft = rightLeftScroll.current.scrollLeft;\r\n    let recWidth = rightLeftScroll.current.scrollWidth;\r\n\r\n    if ((Math.round(recLeft) - magicNum1) % magicNum2 !== 0) {\r\n      recLeft = Math.round((Math.round(recLeft) - magicNum1) / magicNum2);\r\n      recLeft = recLeft * magicNum2 + magicNum1;\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recWidth === recLeft ? recLeft + magicNum3 : recLeft + magicNum2,\r\n        behavior: \"smooth\",\r\n      });\r\n      if (\r\n        isSmallDevice\r\n          ? showMore.recommend < allRecomData.length + 1\r\n          : showMore.recommend < allRecomData.length + 3\r\n      ) {\r\n        const newRecommend = isSmallDevice\r\n          ? showMore.recommend + 1\r\n          : showMore.recommend + 3;\r\n        setShowMore({ recommend: newRecommend });\r\n      }\r\n    } else {\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recLeft === 0 ? recLeft + magicNum1 : recLeft + magicNum2,\r\n        behavior: \"smooth\",\r\n      });\r\n\r\n      if (\r\n        isSmallDevice\r\n          ? showMore.recommend < allRecomData.length + 1\r\n          : showMore.recommend < allRecomData.length + 3\r\n      ) {\r\n        const newRecommend = isSmallDevice\r\n          ? showMore.recommend + 1\r\n          : showMore.recommend + 3;\r\n        setShowMore({ recommend: newRecommend });\r\n      }\r\n    }\r\n  };\r\n\r\n  //like the right handler but we dont load new data as it make sense\r\n  const leftScrollHandler = () => {\r\n    let recLeft = rightLeftScroll.current.scrollLeft;\r\n    let recWidth = rightLeftScroll.current.scrollWidth;\r\n    if ((Math.round(recLeft) - magicNum1) % magicNum2 !== 0) {\r\n      recLeft = Math.round((Math.round(recLeft) - magicNum1) / magicNum2);\r\n      recLeft = recLeft * magicNum2 + magicNum1;\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recWidth === recLeft ? recLeft - magicNum3 : recLeft - magicNum2,\r\n        behavior: \"smooth\",\r\n      });\r\n    } else {\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recWidth === recLeft ? recLeft - magicNum3 : recLeft - magicNum2,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  };\r\n\r\n  //in touch handler we do same thing. maybe we need to clean this mess and make another function to use in all event listeners\r\n  //.\r\n  //..\r\n  //...\r\n  const recTouchHandler = () => {\r\n    let recLeft = rightLeftScroll.current.scrollLeft;\r\n    let recWidth = rightLeftScroll.current.scrollWidth;\r\n\r\n    if (recLeft / recWidth < 0.5) {\r\n      if (\r\n        isSmallDevice\r\n          ? showMore.recommend < allRecomData.length + 1\r\n          : showMore.recommend < allRecomData.length + 3\r\n      ) {\r\n        setShowMore({ recommend: allRecomData.length });\r\n      }\r\n    }\r\n    if ((Math.round(recLeft) - magicNum1) % magicNum2 !== 0 && recLeft !== 0) {\r\n      recLeft = Math.round((Math.round(recLeft) - magicNum1) / magicNum2);\r\n      recLeft = recLeft * magicNum2 + magicNum1;\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recLeft,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {allRecomData.length > 0 && (\r\n        <div>\r\n          <h4 className=\"recom-list-title\">Recommendations</h4>\r\n          <div className=\"recommendation-parent\">\r\n            <div\r\n              className=\"recommendation\"\r\n              ref={rightLeftScroll}\r\n              onTouchEnd={recTouchHandler}\r\n              onMouseDown={recSliderMouseDownHandler}\r\n              onMouseLeave={recSliderMouseLeaveHandler}\r\n              onMouseUp={recSliderMouseUpHandler}\r\n              onMouseMove={recSliderMouseMoveHandler}\r\n            >\r\n              <div>\r\n                {allRecomData\r\n                  .filter((_, index) => showMore.recommend - 1 >= index)\r\n                  .map((recom, index) => {\r\n                    const id = recom.node\r\n                      ? recom.node.mediaRecommendation.id\r\n                      : recom.media.id;\r\n                    return <Recom key={keyParam + id + index} recom={recom} />;\r\n                  })}\r\n                <div ref={wastefulCover} className=\"wasteful-cover\"></div>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={leftScrollHandler}\r\n              className=\"left-0 bg-gradient-to-l\"\r\n            >\r\n              <FontAwesomeIcon\r\n                className=\"font-icon-recom-list transform rotate-180\"\r\n                icon={faChevronCircleRight}\r\n              />\r\n            </button>\r\n            <button\r\n              onClick={rightScrollHandler}\r\n              className=\"right-0 bg-gradient-to-r\"\r\n            >\r\n              <FontAwesomeIcon\r\n                className=\"font-icon-recom-list transform\"\r\n                icon={faChevronCircleRight}\r\n              />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default RecomList;\r\n"],"sourceRoot":""}