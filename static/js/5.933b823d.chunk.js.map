{"version":3,"sources":["components/detailPage/Stream.js","components/detailPage/StreamList.js","components/detailPage/Popularity.js","components/detailPage/ExternalLinks.js","components/detailPage/Rank.js","components/detailPage/Trailer.js","components/detailPage/Character.js","components/detailPage/CharacterList.js","pages/CharacterDetail.js","components/detailPage/Review.js","components/detailPage/ReviewList.js","pages/AnimeDetail.js","components/detailPage/CircleRate.js","utils/helpers.js","components/detailPage/Recom.js","components/Anime.js","components/AnimeList.js","components/detailPage/RecomList.js"],"names":["Stream","episode","motion","a","href","url","target","rel","className","animate","opacity","transition","duration","initial","alt","src","thumbnail","title","StreamList","allEpisode","colsInRow","initialQuantity","keyParam","useState","stream","showMore","setShowMore","gridColsTemp","div","filter","_","index","map","length","onClick","e","remove","Popularity","popularityRange","popularity","toFixed","style","left","icon","faFire","ExternalLinks","bg","link","site","Rank","bgRank","bgBorder","rankRound","rank","context","includes","allTime","year","season","toLowerCase","Trailer","embedId","width","height","frameBorder","allow","allowFullScreen","Character","charID","staffID","char","animeID","mangaStaffID","client","useApolloClient","linkRef","useRef","node","id","undefined","voiceActors","useEffect","current","addEventListener","charClickHandler","writeQuery","query","gql","data","loadingbar","__typename","isLoading","ref","to","image","medium","fontSize","name","full","role","languageV2","unKnownPng","CharacterList","characters","CharacterDetail","characterID","actorID","staffContentShowLess","charContentShowLess","history","useHistory","useQuery","charQuery","variables","char_id","staff_id","loading","error","console","log","message","character","staff","Staff","charAnimeList","media","edges","staffAnimeList","staffMedia","charFavouritesRange","favourites","actorFavouritesRange","monthNames","showMoreLessBtn","document","body","overflow","classList","contains","parentElement","push","faTimesCircle","large","CircleRate","rate","symbol","faHeart","size","age","dateOfBirth","day","month","gender","description","content","AnimeList","allAnimeData","Review","review","reviewText","replace","test","decode","replaceAll","reviewContentShowLess","date","Date","createdAt","getFullYear","getMonth","getDay","rating","user","avatar","score","ratingAmount","summary","ReviewList","allReviewData","display","AnimeDetail","params","useParams","Number","useLocation","pathname","split","isCharacterPage","selectAnimeQuery","detailQuery","Loading","aData","Media","english","romaji","startDate","endDate","banner","bannerImage","coverImage","animeColor30","hexToRgbA","color","externalLinks","genres","rankings","relations","reviews","streamingEpisodes","studios","tags","nextAiringEpisode","favouritesRange","isOneDate","Fragment","backgroundImage","backgroundColor","borderColor","format","seasonYear","episodes","secondsToDhms","volumes","chapters","gen","faClock","timeUntilAiring","isMain","st","source","meanScore","trailer","tag","RecomList","grad","borderRadius","right","top","transform","hex","c","substring","join","seconds","dhms","d","Math","floor","h","m","s","dDisplay","hDisplay","mDisplay","refElement","extraClassName","setTimeout","firstElementChild","offsetHeight","position","showMoreBtn","createElement","textContent","lastElementChild","after","Recom","recom","widthParam","recMedia","mediaRecommendation","draggable","preventDefault","status","faThumbsDown","faThumbsUp","Anime","anime","averageScore","counterAnime","trimedAllAnimeData","anim","animeData","allRecom","isSmallDevice","documentElement","clientWidth","magicNum1","magicNum2","rightLeftScroll","wastefulCover","recommend","allRecomData","recomListQuery","recommendations","startx","scrollLeft","isDown","onTouchEnd","recLeft","scrollWidth","round","scrollTo","behavior","onMouseDown","pageX","offsetLeft","onMouseLeave","onMouseUp","onMouseMove","walk","slice","recWidth","faChevronCircleRight","newRecommend"],"mappings":"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","file":"static/js/5.933b823d.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst Stream = ({ episode }) => {\r\n  return (\r\n    <motion.a\r\n      href={episode.url}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"anime-card-container hover-card-num-1\"\r\n      animate={{ opacity: 1, transition: { duration: 2 } }}\r\n      initial={{ opacity: 0 }}\r\n    >\r\n      <img alt=\"\" src={episode.thumbnail}></img>\r\n      <h3 className=\"text-sm line-clamp-2 px-2\">{episode.title}</h3>\r\n    </motion.a>\r\n  );\r\n};\r\n\r\nexport default Stream;\r\n","import React, { useState } from \"react\";\r\nimport Stream from \"./Stream\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst StreamList = ({ allEpisode, colsInRow, initialQuantity, keyParam }) => {\r\n  const [showMore, setShowMore] = useState({\r\n    stream: initialQuantity,\r\n  });\r\n\r\n  let gridColsTemp = `grid-cols-2 ssm:grid-cols-${colsInRow - 1} lg:grid-cols-${\r\n    colsInRow - 1\r\n  } xl:grid-cols-${colsInRow}`;\r\n\r\n  const streamShowMoreHandler = (e) => {\r\n    if (showMore.stream > 20) {\r\n      setShowMore({ stream: showMore.stream + 999 });\r\n      e.target.remove();\r\n    } else {\r\n      setShowMore({ stream: showMore.stream + 10 });\r\n    }\r\n    if (showMore.stream + 10 >= allEpisode.length) {\r\n      e.target.remove();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div className=\"pb-10\">\r\n      <div className=\"anime-list-container\">\r\n        <div className={`anime-list ${gridColsTemp}`}>\r\n          {allEpisode\r\n            .filter((_, index) => index <= showMore.stream - 1)\r\n            .map((episode) => {\r\n              return (\r\n                <Stream\r\n                  key={`${keyParam}-${episode.title}`}\r\n                  episode={episode}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n      {allEpisode.length > initialQuantity && (\r\n        <button\r\n          onClick={streamShowMoreHandler}\r\n          className=\"stream-show-more-btn \"\r\n        >\r\n          Load More\r\n        </button>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\nexport default StreamList;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFire } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Popularity = ({ popularity }) => {\r\n  let popularityRange = 100 - ((popularity / 400000) * 100).toFixed(0);\r\n  if (popularityRange > 94) {\r\n    popularityRange = 94;\r\n  }\r\n  if (popularityRange < 0) {\r\n    popularityRange = 0;\r\n  }\r\n\r\n  return (\r\n    <div className=\"popularity-container\">\r\n      <div>\r\n        <div style={{ left: -popularityRange + \"%\" }}></div>\r\n      </div>\r\n      <FontAwesomeIcon\r\n        style={{ left: 94.8 - popularityRange + \"%\" }}\r\n        className=\"font-icon-pop\"\r\n        icon={faFire}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Popularity;\r\n","const ExternalLinks = ({ link }) => {\r\n  let bg;\r\n  switch (link.site) {\r\n    case \"Twitter\":\r\n    case \"Hulu\":\r\n    case \"Funimation\":\r\n      bg = \"blue\";\r\n      break;\r\n    case \"Official Site\":\r\n      bg = \"green\";\r\n      break;\r\n    case \"Youtube\":\r\n    case \"Tubi TV\":\r\n    case \"Netflix\":\r\n      bg = \"red\";\r\n      break;\r\n    case \"Crunchyroll\":\r\n    case \"VRV\":\r\n      bg = \"purple\";\r\n      break;\r\n    case \"AnimeLab\":\r\n    case \"Amazon\":\r\n      bg = \"yellow\";\r\n      break;\r\n    default:\r\n      bg = \"gray\";\r\n  }\r\n\r\n  return (\r\n    <li>\r\n      <a\r\n        className={`external-link  bg-${bg}-300\r\n               hover:bg-${bg}-500 active:bg-${bg}-600`}\r\n        href={link.url}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        {link.site}\r\n      </a>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ExternalLinks;\r\n","const Rank = ({ rank }) => {\r\n  let bgRank, bgBorder, rankRound;\r\n  if (rank.context.includes(\"most popular\")) {\r\n    bgRank = \"bg-green-200\";\r\n    bgBorder = \"border-green-600\";\r\n    rankRound = \"bg-green-400\";\r\n  } else {\r\n    bgRank = \"bg-yellow-200\";\r\n    bgBorder = \"border-yellow-600\";\r\n    rankRound = \"bg-yellow-400\";\r\n  }\r\n\r\n  return (\r\n    <li\r\n      className={`rank ${bgRank} ${\r\n        rank.allTime ? `border-r-4 border-l-4 ${bgBorder} ` : \"\"\r\n      } min-w-max rounded-2xl pr-3 py-1  my-1 overflow-hidden`}\r\n    >\r\n      <span className={`${rankRound} pr-1 py-7 pl-7 font-semibold -ml-6`}>\r\n        #{rank.rank}\r\n      </span>\r\n      {\" \" + rank.context}\r\n      <span\r\n        className={`bg-gray-200 ${\r\n          rank.year ? \"p-1\" : \"\"\r\n        } text-gray-800 rounded-xl text-xs font-bold float-right`}\r\n      >\r\n        {rank.year\r\n          ? `${rank.season ? rank.season.toLowerCase() : \"\"} ${rank.year}`\r\n          : \"\"}\r\n      </span>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Rank;\r\n","\r\nconst Trailer = ({ embedId }) => (\r\n  <div className=\"video-responsive\">\r\n    <iframe\r\n      width=\"853\"\r\n      height=\"480\"\r\n      src={`https://www.youtube.com/embed/${embedId}`}\r\n      frameBorder=\"0\"\r\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n      allowFullScreen\r\n      title=\"Embedded youtube\"\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default Trailer;\r\n","import React,{useEffect, useRef} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { unKnownPng } from \"../../utils/helpers\";\r\nimport { useApolloClient,gql } from '@apollo/client';\r\n\r\n\r\nconst Character = ({ char, animeID, mangaStaffID }) => {\r\n  const client = useApolloClient();\r\n  const linkRef = useRef(null);\r\n  let charID, staffID;\r\n  charID = char.node.id;\r\n  if (char.voiceActors[0] === undefined) {\r\n    staffID = mangaStaffID;\r\n  } else {\r\n    staffID = char.voiceActors[0].id;\r\n  }\r\n\r\n  useEffect(() => {\r\n    \r\n    linkRef.current.addEventListener('click', charClickHandler)\r\n    // eslint-disable-next-line\r\n  }, []);\r\n  \r\n  const charClickHandler = () => {\r\n    client.writeQuery({\r\n      query: gql`\r\n      query WriteIsLoading {\r\n        loadingbar {\r\n          isLoading\r\n        }\r\n      }`,\r\n      data: { // Contains the data to write\r\n        loadingbar: {\r\n          __typename: 'LoadingBar',\r\n          isLoading: 30\r\n        },\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Link ref={linkRef}\r\n      to={`/anime/${animeID}/character/${charID}/actor/${staffID}`}\r\n      className=\"char-container\"\r\n    >\r\n      <div className=\"char-image\">\r\n        <img src={char.node.image.medium} alt=\"\"/>\r\n      </div>\r\n      <div\r\n        className=\"char-staff-info\"\r\n        style={{ fontSize: \"9px\" }}\r\n      >\r\n        <div className=\"char-name\">\r\n          <span>{char.node.name.full}</span>\r\n          <span>\r\n            {staffID !== mangaStaffID ? char.voiceActors[0].name.full : \"\"}\r\n          </span>\r\n        </div>\r\n        <div className=\"char-role\">\r\n          <span>{char.role.toLowerCase()}</span>\r\n          <span>\r\n            {staffID !== mangaStaffID ? char.voiceActors[0].languageV2 : \"\"}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"staff-image\">\r\n        <img\r\n          src={\r\n            staffID !== mangaStaffID\r\n              ? char.voiceActors[0].image.medium\r\n              : unKnownPng\r\n          }\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Character;\r\n","import React, { useState } from \"react\";\r\nimport Character from \"./Character\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst CharacterList = ({ characters, animeID, mangaStaffID }) => {\r\n  const [showMore, setShowMore] = useState({\r\n    stream: 5,\r\n  });\r\n\r\n  const streamShowMoreHandler = (e) => {\r\n    if (showMore.stream > 20) {\r\n      setShowMore({ stream: showMore.stream + 999 });\r\n      e.target.remove();\r\n    } else {\r\n      setShowMore({ stream: showMore.stream + 10 });\r\n    }\r\n    if (showMore.stream + 10 >= characters.length) {\r\n      e.target.remove();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"char-list-container\">\r\n      <motion.div>\r\n        {characters\r\n          .filter((_, index) => index < showMore.stream)\r\n          .map((char) => {\r\n            return (\r\n              <Character\r\n                key={char.node.id}\r\n                char={char}\r\n                animeID={animeID}\r\n                mangaStaffID={mangaStaffID}\r\n              />\r\n            );\r\n          })}\r\n      </motion.div>\r\n      {characters.length > 4 && (\r\n        <button\r\n          onClick={streamShowMoreHandler}\r\n          className=\"stream-show-more-btn\"\r\n        >\r\n          Load More\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default CharacterList;\r\n","import { useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { charQuery } from \"../utils/queries\";\r\nimport { Markup } from \"interweave\";\r\nimport AnimeList from \"../components/AnimeList\";\r\nimport { showMoreLessBtn, unKnownPng } from \"../utils/helpers\";\r\nimport { faTimesCircle } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport CircleRate from \"../components/detailPage/CircleRate\";\r\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst CharacterDetail = ({ animeID, characterID, actorID }) => {\r\n  const staffContentShowLess = useRef(null);\r\n  const charContentShowLess = useRef(null);\r\n  //if character hasn't any actor\r\n\r\n  const history = useHistory();\r\n  const modalCloseHandler = (e) => {\r\n    if (\r\n      e.target.classList.contains(\"character-page-shadow\") ||\r\n      e.target.classList.contains(\"modal-close\") ||\r\n      e.target.parentElement.classList.contains(\"modal-close\")\r\n    ) {\r\n      //managing 2 scrollbar\r\n      document.body.style.overflow = \"auto\";\r\n      history.push(`/anime/${animeID}`);\r\n    }\r\n  };\r\n\r\n  const { loading, error, data } = useQuery(charQuery, {\r\n    variables: {\r\n      char_id: characterID,\r\n      staff_id: actorID,\r\n    },\r\n  });\r\n\r\n  if (loading) {\r\n    return null;\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error.message);\r\n    return `Error! ${error}`;\r\n  }\r\n  const character = data.Character;\r\n  const staff = data.Staff;\r\n  const charAnimeList = character.media.edges;\r\n  const staffAnimeList = staff.staffMedia.edges;\r\n\r\n  let charFavouritesRange = ((character.favourites / 30000) * 100).toFixed(0);\r\n  let actorFavouritesRange = ((staff.favourites / 10000) * 100).toFixed(0);\r\n\r\n  const monthNames = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ];\r\n\r\n  // staff description\r\n  showMoreLessBtn(\r\n    staffContentShowLess,\r\n    \"show-more-btn staff-show-more-desc-btn\",\r\n    250\r\n  );\r\n\r\n  //character desciption\r\n  showMoreLessBtn(\r\n    charContentShowLess,\r\n    \"show-more-btn staff-show-more-desc-btn\",\r\n    250\r\n  );\r\n\r\n  //managing 2 scrollbar\r\n  document.body.style.overflow = \"hidden\";\r\n\r\n  return (\r\n    <div className=\"character-page-shadow\" onClick={modalCloseHandler}>\r\n      <div className=\"character-page-container\">\r\n        <span className=\"modal-close \">\r\n          <FontAwesomeIcon className=\"fixed modal-close\" icon={faTimesCircle} />\r\n        </span>\r\n\r\n        <div className=\"character-info\">\r\n          <div>\r\n            <div className=\"character-image\">\r\n              <img alt=\"\"\r\n                src={character.image.large ? character.image.large : unKnownPng}\r\n              />\r\n              <div>\r\n                <CircleRate\r\n                  rate={charFavouritesRange}\r\n                  symbol={faHeart}\r\n                  size={5}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"character-desc\">\r\n              <h1>\r\n                <strong> Name:</strong> <br />\r\n                {character.name.full}\r\n              </h1>\r\n              {character.age && (\r\n                <p>\r\n                  <strong>Age:</strong>\r\n                  <br />\r\n                  {character.age} years\r\n                </p>\r\n              )}\r\n              {character.dateOfBirth.day && (\r\n                <p>\r\n                  <strong>Date of Birth:</strong>\r\n                  <br />\r\n                  {character.dateOfBirth.day}{\" \"}\r\n                  {monthNames[character.dateOfBirth.month - 1]}\r\n                </p>\r\n              )}\r\n              {character.gender && (\r\n                <p>\r\n                  <strong>Gender:</strong>\r\n                  <br />\r\n                  {character.gender}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            {character.description && (\r\n              <div\r\n                className=\"description-character-markup\"\r\n                ref={charContentShowLess}\r\n              >\r\n                <Markup content={character.description} />\r\n              </div>\r\n            )}\r\n            {charAnimeList[0] && (\r\n              <div className=\"character-media-list\">\r\n                <h3>Character media</h3>\r\n                {\r\n                  <AnimeList\r\n                    allAnimeData={charAnimeList}\r\n                    colsInRow={3}\r\n                    initialQuantity={3}\r\n                    keyParam={\"charMedia\"}\r\n                  />\r\n                }\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"staff-info\">\r\n          <div>\r\n            <div className=\"staff-desc\">\r\n              <h1>\r\n                <strong> Name:</strong> <br />\r\n                {staff.name.full}\r\n              </h1>\r\n              {staff.age && (\r\n                <p>\r\n                  <strong>Age:</strong>\r\n                  <br />\r\n                  {staff.age} years\r\n                </p>\r\n              )}\r\n              {staff.dateOfBirth.day && (\r\n                <p>\r\n                  <strong>Date of Birth:</strong>\r\n                  <br />\r\n                  {staff.dateOfBirth.day}{\" \"}\r\n                  {monthNames[staff.dateOfBirth.month - 1]}\r\n                </p>\r\n              )}\r\n              {staff.gender && (\r\n                <p>\r\n                  <strong>Gender:</strong>\r\n                  <br />\r\n                  {staff.gender}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div className=\"staff-image\">\r\n              <img alt=\"\" src={staff.image.large ? staff.image.large : unKnownPng} />\r\n              <div>\r\n                <CircleRate\r\n                  rate={actorFavouritesRange}\r\n                  symbol={faHeart}\r\n                  size={5}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            {staff.description && (\r\n              <div\r\n                className=\"description-staff-markup\"\r\n                ref={staffContentShowLess}\r\n              >\r\n                <Markup content={staff.description} />\r\n              </div>\r\n            )}\r\n            {staffAnimeList[0] && (\r\n              <div className=\"staff-media-list\">\r\n                <h3>Staff media</h3>\r\n                {\r\n                  <AnimeList\r\n                    allAnimeData={staffAnimeList}\r\n                    colsInRow={3}\r\n                    initialQuantity={3}\r\n                    keyParam={\"staffMedia\"}\r\n                  />\r\n                }\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CharacterDetail;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Markup } from \"interweave\";\r\nimport CircleRate from \"./CircleRate\";\r\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { showMoreLessBtn } from \"../../utils/helpers\";\r\nimport { decode } from \"html-entities\";\r\n\r\nconst Review = ({ review }) => {\r\n  let reviewText = review.body;\r\n\r\n  let reg1 = /\\[(.*?)\\]\\((.*?)\\)/g;\r\n  reviewText = reviewText.replace(reg1, \"<a href='$2'>$1</a>\");\r\n\r\n  let reg2 = /<pre>/;\r\n  if (reg2.test(reviewText)) {\r\n    reviewText = decode(reviewText);\r\n    reviewText = reviewText.replaceAll(/__|\\*|<\\/?code>|<\\/?pre>/g, \"\");\r\n  }\r\n\r\n  const reviewContentShowLess = useRef(null);\r\n\r\n  let date = new Date(review.createdAt * 1000);\r\n  let year = date.getFullYear();\r\n  let month = date.getMonth();\r\n  let day = date.getDay();\r\n  date = `${year}/${month}/${day}`;\r\n\r\n  useEffect(() => {\r\n    showMoreLessBtn(\r\n      reviewContentShowLess,\r\n      \"show-more-btn to-indigo-50 hover:bg-indigo-50 hover:bg-opacity-60\",\r\n      150\r\n    );\r\n  }, [reviewContentShowLess]);\r\n\r\n  let rate;\r\n  if (review.rating >= 100) {\r\n    rate = 100;\r\n  } else {\r\n    rate = review.rating;\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"review-card-container \"\r\n      animate={{ opacity: 1, transition: { duration: 2 } }}\r\n      initial={{ opacity: 0 }}\r\n    >\r\n      <div className=\"reviewer-container\">\r\n        <div>\r\n          <div className=\"review-user-info\">\r\n            <img alt=\"\" src={review.user.avatar.medium} />\r\n            <h4>{review.user.name}</h4>\r\n          </div>\r\n          <div className=\"review-rate\">\r\n            <div className=\"review-score\">\r\n              <CircleRate rate={review.score} size={4} />\r\n              <br />\r\n            </div>\r\n            <div className=\"review-popularity\">\r\n              <CircleRate rate={rate} symbol={faHeart} size={4} />\r\n\r\n              <p>this review</p>\r\n              <p>\r\n                <strong>{review.ratingAmount}</strong> rates\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"review-date\">\r\n          {date}\r\n        </div>\r\n      </div>\r\n      {review.body ? (\r\n        <div\r\n          className=\"description-character-markup review-body\"\r\n          ref={reviewContentShowLess}\r\n        >\r\n          <Markup content={reviewText} />\r\n        </div>\r\n      ) : (\r\n        <div className=\"description-character-markup review-summary\">\r\n          <Markup content={review.summary} />\r\n        </div>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default Review;\r\n","import React, { useState } from \"react\";\r\nimport Review from \"./Review\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst ReviewList = ({ allReviewData, initialQuantity, keyParam }) => {\r\n  const [showMore, setShowMore] = useState({\r\n    review: initialQuantity,\r\n  });\r\n\r\n  const reviewShowMoreHandler = (e) => {\r\n    if (showMore.review > 100) {\r\n      setShowMore({ ...showMore, review: showMore.review + 999 });\r\n      e.target.style.display = \"none\";\r\n    } else {\r\n      setShowMore({ ...showMore, review: showMore.review + 3 });\r\n    }\r\n    if (showMore.review + 3 >= allReviewData.length) {\r\n      e.target.style.display = \"none\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div className=\"review-list-container\">\r\n      <div className=\"anime-list-container\">\r\n        <div>\r\n          {allReviewData\r\n            .filter((_, index) => index <= showMore.review - 1)\r\n            .map((review) => {\r\n              return (\r\n                <Review\r\n                  key={`${keyParam}-${review.node.id}`}\r\n                  review={review.node}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n\r\n      {allReviewData.length > initialQuantity && (\r\n        <button\r\n          onClick={reviewShowMoreHandler}\r\n          className=\"stream-show-more-btn\"\r\n        >\r\n          Load More\r\n        </button>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\nexport default ReviewList;\r\n","import React from \"react\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { useLocation, useParams } from \"react-router-dom\";\r\nimport { Markup } from \"interweave\";\r\nimport { hexToRgbA, secondsToDhms } from \"../utils/helpers\";\r\nimport AnimeList from \"../components/AnimeList\";\r\nimport StreamList from \"../components/detailPage/StreamList\";\r\nimport CircleRate from \"../components/detailPage/CircleRate\";\r\nimport Popularity from \"../components/detailPage/Popularity\";\r\nimport { faHeart, faClock } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport ExternalLinks from \"../components/detailPage/ExternalLinks\";\r\nimport Rank from \"../components/detailPage/Rank\";\r\nimport { detailQuery } from \"../utils/queries\";\r\nimport Trailer from \"../components/detailPage/Trailer\";\r\nimport CharacterList from \"../components/detailPage/CharacterList\";\r\nimport CharacterDetail from \"./CharacterDetail\";\r\nimport ReviewList from \"../components/detailPage/ReviewList\";\r\nimport RecomList from \"../components/detailPage/RecomList\";\r\nimport { useApolloClient, gql } from \"@apollo/client\";\r\nimport Loading from \"./Loading\";\r\n\r\nconst AnimeDetail = () => {\r\n  const client = useApolloClient();\r\n  client.writeQuery({\r\n    query: gql`\r\n      query WriteIsLoading {\r\n        loadingbar {\r\n          isLoading\r\n        }\r\n      }\r\n    `,\r\n    data: {\r\n      // Contains the data to write\r\n      loadingbar: {\r\n        __typename: \"LoadingBar\",\r\n        isLoading: 80,\r\n      },\r\n    },\r\n  });\r\n\r\n  document.body.style.overflow = \"auto\";\r\n\r\n  const params = useParams();\r\n  const id = Number(params.animeID);\r\n  const location = useLocation();\r\n  const charID = location.pathname.split(\"/\");\r\n  const isCharacterPage = charID[3] === \"character\";\r\n\r\n  const selectAnimeQuery = detailQuery;\r\n  const { loading, error, data } = useQuery(selectAnimeQuery, {\r\n    variables: {\r\n      id: id,\r\n    },\r\n  });\r\n\r\n  if (loading) {\r\n    return <Loading />;\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error.message);\r\n    return `Error! ${error}`;\r\n  }\r\n\r\n  const aData = data.Media;\r\n  const title = aData.title.english ? aData.title.english : aData.title.romaji;\r\n  const description = aData.description;\r\n  const startDate = aData.startDate;\r\n  const endDate = aData.endDate;\r\n  const banner = aData.bannerImage;\r\n  const characters = aData.characters.edges;\r\n  const coverImage = aData.coverImage;\r\n  const animeColor30 = hexToRgbA(coverImage.color, 0.3);\r\n  const externalLinks = aData.externalLinks;\r\n  const genres = aData.genres;\r\n  const rankings = aData.rankings;\r\n  const relations = aData.relations.edges;\r\n  const reviews = aData.reviews.edges;\r\n  const streamingEpisodes = aData.streamingEpisodes;\r\n  const studios = aData.studios.edges;\r\n  const tags = aData.tags;\r\n  const nextAiringEpisode = aData.nextAiringEpisode;\r\n  let favouritesRange = ((aData.favourites / 30000) * 100).toFixed(0);\r\n  if (favouritesRange > 100) {\r\n    favouritesRange = 100;\r\n  }\r\n  if (favouritesRange < 1) {\r\n    favouritesRange = 1;\r\n  }\r\n  const popularity = aData.popularity;\r\n  const isOneDate =\r\n    endDate.year === startDate.year &&\r\n    endDate.month === startDate.month &&\r\n    endDate.day === startDate.day;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {isCharacterPage && (\r\n        <CharacterDetail\r\n          animeID={charID[2]}\r\n          characterID={charID[4]}\r\n          actorID={charID[6]}\r\n        />\r\n      )}\r\n\r\n      <div className=\"detail-grid-container detail-page-container\">\r\n        <div className=\"d-header\" style={{ backgroundImage: `url(${banner})` }}>\r\n          <div className=\"banner-inside\">\r\n            <h1\r\n              className=\"detail-title\"\r\n              style={{ backgroundColor: `${animeColor30}` }}\r\n            >\r\n              {title}\r\n            </h1>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-sidebar\">\r\n          <img\r\n            alt=\"\"\r\n            className=\"detail-cover-image \"\r\n            style={{ borderColor: `${animeColor30}` }}\r\n            src={coverImage.large}\r\n          />\r\n          <h2>{title}</h2>\r\n          <div className=\"format-side-detail\">{aData.format}</div>\r\n          <div className=\"detail-side-info\">\r\n            {aData.season && aData.season.toLowerCase()}{\" \"}\r\n            {aData.seasonYear && aData.seasonYear}\r\n            {aData.episodes && ` | ${aData.episodes} Episodes `}\r\n            {aData.duration &&\r\n              ` | ${secondsToDhms(aData.duration * 60, \"dhm\")}`}\r\n            {aData.volumes && `${aData.volumes} Volumes | `}\r\n            {aData.chapters && `${aData.chapters} Chapters`}\r\n          </div>\r\n          <div className=\"detail-side-genres-container\">\r\n            {genres.map((gen) => {\r\n              return <div key={gen}>#{gen}</div>;\r\n            })}\r\n          </div>\r\n          <h4>Date</h4> <hr />\r\n          <div className=\"detail-side-date\">\r\n            <span>\r\n              {\" \"}\r\n              {`${startDate.year}${\r\n                startDate.month\r\n                  ? \"/\" + startDate.month + \"/\" + startDate.day\r\n                  : \"\"\r\n              }`}\r\n            </span>\r\n            {!isOneDate && <div>-</div>}\r\n            {!isOneDate && (\r\n              <span>\r\n                {endDate.year\r\n                  ? endDate.year +\r\n                    (endDate.month\r\n                      ? \"/\" + endDate.month + \"/\" + endDate.day\r\n                      : \"\")\r\n                  : \"Present\"}\r\n              </span>\r\n            )}\r\n          </div>\r\n          {nextAiringEpisode && (\r\n            <div className=\"detail-side-airing\">\r\n              <h4>Airing</h4> <hr />\r\n              <div>\r\n                Episode {nextAiringEpisode.episode}\r\n                <span>\r\n                  <FontAwesomeIcon icon={faClock} />{\" \"}\r\n                  {secondsToDhms(nextAiringEpisode.timeUntilAiring, \"dhm\")}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {popularity !== undefined && (\r\n            <div className=\"detail-side-pop\">\r\n              <h4>Popularity</h4>\r\n              <Popularity popularity={popularity} />\r\n            </div>\r\n          )}\r\n          {rankings[0] && (\r\n            <div className=\"d-ranking \">\r\n              <h4>Ranking</h4>\r\n              <hr />\r\n              <ul>\r\n                {rankings.map((rank) => {\r\n                  return <Rank key={rank.id} rank={rank} />;\r\n                })}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          {studios[0] && (\r\n            <div>\r\n              <h4>Studios</h4>\r\n              <hr />\r\n              <div className=\"detail-side-studios\">\r\n                {studios\r\n                  .filter((e) => e.isMain)\r\n                  .map((st) => {\r\n                    return <span key={st.node.id}>{st.node.name}</span>;\r\n                  })}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {studios[0] && (\r\n            <div className=\"detail-side-producers\">\r\n              <h4>Producers</h4>\r\n              <hr />\r\n              <div>\r\n                {studios\r\n                  .filter((e) => !e.isMain)\r\n                  .map((st) => {\r\n                    return <span key={st.node.id}>{st.node.name}</span>;\r\n                  })}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {aData.source && (\r\n            <div>\r\n              <h4>Source</h4>\r\n              <hr />\r\n              <div className=\"detail-side-source\">{aData.source}</div>\r\n            </div>\r\n          )}\r\n          {characters[0] && (\r\n            <div>\r\n              <h4>Characters</h4>\r\n              <hr />\r\n              <CharacterList\r\n                characters={characters}\r\n                mangaStaffID={aData.staff.edges[0].node.id}\r\n                animeID={id}\r\n              />\r\n            </div>\r\n          )}\r\n          {externalLinks[0] && (\r\n            <div>\r\n              <h4>Links</h4>\r\n              <hr />\r\n              <ul>\r\n                {externalLinks.map((link) => {\r\n                  return <ExternalLinks key={link.id} link={link} />;\r\n                })}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"d-main\">\r\n          <div className=\"detail-main-score\">\r\n            <CircleRate rate={aData.meanScore} size={5} />\r\n          </div>\r\n          <div className=\"detail-main-fav\">\r\n            <CircleRate rate={favouritesRange} symbol={faHeart} size={5} />\r\n          </div>\r\n          <div className=\"detail-main-desc\">\r\n            <Markup content={description} />\r\n          </div>\r\n          <br />\r\n          <br />\r\n          {aData.trailer && <Trailer embedId={aData.trailer.id} />} <br />\r\n          <h4>tags:</h4>\r\n          <div className=\"detail-main-tag\">\r\n            {tags &&\r\n              tags\r\n                .filter((_, index) => index < 6)\r\n                .map((tag) => {\r\n                  return (\r\n                    <span key={tag.name}>\r\n                      <span>{tag.name}</span>\r\n                      <span>{tag.rank}%</span>\r\n                    </span>\r\n                  );\r\n                })}\r\n          </div>\r\n        </div>\r\n\r\n        {relations[0] && (\r\n          <div className=\"d-relate\">\r\n            <h4>Relations</h4>\r\n            <hr />\r\n            <AnimeList\r\n              allAnimeData={relations}\r\n              colsInRow={4}\r\n              initialQuantity={4}\r\n              keyParam={\"relate\"}\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"d-watch \">\r\n          {streamingEpisodes[0] && (\r\n            <div className=\"detail-watch-stream\">\r\n              <h4>Stream Watch</h4>\r\n              <hr />\r\n              <StreamList\r\n                allEpisode={streamingEpisodes}\r\n                colsInRow={4}\r\n                initialQuantity={4}\r\n                keyParam={\"stream\"}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {reviews[0] && (\r\n            <div className=\"detail-watch-reviews\">\r\n              <h4>Reviews</h4>\r\n              <hr />\r\n              <ReviewList\r\n                allReviewData={reviews}\r\n                initialQuantity={2}\r\n                keyParam={\"review\"}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"d-recom\">\r\n          <RecomList animeID={id} keyParam={\"recom\"} initialQuantity={7} />\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default AnimeDetail;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nconst CircleRate = ({ rate, symbol, size }) => {\r\n  let grad, bg;\r\n  if (rate === null) {\r\n    rate = 0;\r\n  }\r\n  if (rate <= 25) {\r\n    bg = \"bg-red-500\";\r\n    grad = `linear-gradient(${\r\n      (rate / 100) * 360 + 90\r\n    }deg, transparent 50%, rgb(212, 212, 212) 50%), linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  } else if (rate < 50) {\r\n    bg = \"bg-yellow-500\";\r\n    grad = `linear-gradient(${\r\n      (rate / 100) * 360 + 90\r\n    }deg, transparent 50%, rgb(212, 212, 212) 50%), linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  } else if (rate === 50) {\r\n    bg = \"bg-yellow-300\";\r\n    grad = `linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  } else if (rate >= 100) {\r\n    rate = 100;\r\n    bg = \"bg-green-600\";\r\n    grad = \"none\";\r\n  } else if (rate <= 75) {\r\n    bg = \"bg-green-300\";\r\n    grad = `linear-gradient(${\r\n      ((rate - 50) / 100) * 360 + 90\r\n    }deg, transparent 50%, rgba(110,231,183,1) 50%), linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  } else {\r\n    bg = \"bg-green-500\";\r\n    grad = `linear-gradient(${\r\n      ((rate - 50) / 100) * 360 + 90\r\n    }deg, transparent 50%, rgba(16,185,129,1) 50%), linear-gradient(90deg, rgb(212, 212, 212) 50%, transparent 50%)`;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundImage: grad,\r\n        width: `${size}rem`,\r\n        height: `${size}rem`,\r\n        borderRadius: \"50%\",\r\n      }}\r\n      className={`${bg} circle-rate-container group group-hover:animate-reversecycler`}\r\n    >\r\n      <div\r\n        className=\"group-hover:animate-cycler\"\r\n        style={{\r\n          width: `${size - 1}rem`,\r\n          height: `${size - 1}rem`,\r\n          borderRadius: \"50%\",\r\n        }}\r\n      >\r\n        {symbol ? (\r\n          <div className=\"rate-symbol\">\r\n            <FontAwesomeIcon\r\n              icon={symbol}\r\n              className={`${\r\n                size === 5 ? \"text-6xl\" : size === 4 ? \"text-5xl \" : \"\"\r\n              } text-red-500`}\r\n            />\r\n            <div\r\n              className={`${\r\n                size === 5 ? \"text-lg\" : size === 4 ? \"text-sm\" : \"\"\r\n              } text-white absolute`}\r\n              style={{\r\n                right: \"50%\",\r\n                top: \"50%\",\r\n                transform: \"translate(50%, -50%)\",\r\n              }}\r\n            >\r\n              {rate}%\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <span className=\"score-num\">\r\n            <span>score</span>\r\n            <span\r\n              className={`${\r\n                size === 5 ? \"text-2xl\" : size === 4 ? \"text-base\" : \"\"\r\n              }`}\r\n            >\r\n              {rate}%\r\n            </span>\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CircleRate;\r\n","// convert hex to rgba\r\nexport const hexToRgbA = (hex, opacity) => {\r\n  let c;\r\n  if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\r\n    c = hex.substring(1).split(\"\");\r\n    if (c.length === 3) {\r\n      c = [c[0], c[0], c[1], c[1], c[2], c[2]];\r\n    }\r\n    c = \"0x\" + c.join(\"\");\r\n    return (\r\n      \"rgba(\" +\r\n      [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(\",\") +\r\n      `,${opacity})`\r\n    );\r\n  }\r\n  return \"rgba(0,0,0,0.2)\";\r\n};\r\n\r\nexport const secondsToDhms = (seconds, dhms) => {\r\n  seconds = Number(seconds);\r\n  let d = Math.floor(seconds / (3600 * 24));\r\n  let h = Math.floor((seconds % (3600 * 24)) / 3600);\r\n  let m = Math.floor((seconds % 3600) / 60);\r\n  let s = Math.floor(seconds % 60);\r\n  let dDisplay = d > 0 ? d + \"d \" : \"\";\r\n  let hDisplay = h > 0 ? h + \"h \" : \"\";\r\n  let mDisplay = m > 0 ? m + \"min \" : \"\";\r\n  let sDisplay = s > 0 ? s + \"s\" : \"\";\r\n  if (dhms === \"dhms\") {\r\n    return dDisplay + hDisplay + mDisplay + sDisplay;\r\n  } else if (dhms === \"dhm\") {\r\n    return dDisplay + hDisplay + mDisplay;\r\n  }\r\n};\r\n\r\nexport const showMoreLessBtn = (refElement, extraClassName, height) => {\r\n  return setTimeout(() => {\r\n    if (refElement.current) {\r\n      if (\r\n        refElement.current.firstElementChild.offsetHeight > `${height + 100}`\r\n      ) {\r\n        refElement.current.firstElementChild.style.height = `${height}px`;\r\n        refElement.current.firstElementChild.style.overflow = \"hidden\";\r\n        refElement.current.firstElementChild.style.position = \"relative\";\r\n        const showMoreBtn = document.createElement(\"button\");\r\n        showMoreBtn.className = extraClassName;\r\n        showMoreBtn.textContent = \"Show More\";\r\n        refElement.current.firstElementChild.lastElementChild.after(\r\n          showMoreBtn\r\n        );\r\n\r\n        showMoreBtn.addEventListener(\"click\", () => {\r\n          showMoreBtn.style.display = \"none\";\r\n          refElement.current.firstElementChild.style.height = \"100%\";\r\n        });\r\n      }\r\n    }\r\n  }, 100);\r\n};\r\n\r\nexport const unKnownPng =\r\n  \"https://png.pngitem.com/pimgs/s/52-526033_unknown-person-icon-png-transparent-png.png\";\r\n","import { Markup } from \"interweave\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { faThumbsUp, faThumbsDown } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useApolloClient, gql } from \"@apollo/client\";\r\n\r\nconst Recom = ({ recom, widthParam }) => {\r\n  const recMedia = recom.node ? recom.node.mediaRecommendation : recom.media;\r\n\r\n  const rating = recom.node ? recom.node.rating : recom.rating;\r\n\r\n  const history = useHistory();\r\n  const client = useApolloClient();\r\n\r\n  const animeCardClickHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    client.writeQuery({\r\n      query: gql`\r\n        query WriteIsLoading {\r\n          loadingbar {\r\n            isLoading\r\n          }\r\n        }\r\n      `,\r\n      data: {\r\n        // Contains the data to write\r\n        loadingbar: {\r\n          __typename: \"LoadingBar\",\r\n          isLoading: 30,\r\n        },\r\n      },\r\n    });\r\n\r\n    setTimeout(() => {\r\n      history.push(`/anime/${recMedia.id}`);\r\n    }, 500);\r\n  };\r\n  return (\r\n    <motion.a\r\n      draggable={true}\r\n      href={`/anime/${recMedia.id}`}\r\n      onClick={animeCardClickHandler}\r\n      className={` ${\r\n        widthParam ? \"w-full ssm:w-8/12 sm:w-11/12 my-3\" : \"w-60 mx-3\"\r\n      }  recom-container`}\r\n    >\r\n      <div className=\"recom-detail\">\r\n        <img alt=\"\" src={recMedia.coverImage.large} />\r\n        <div className=\"recom-info\">\r\n          <p className=\"line-clamp-4\">\r\n            <b>Title:</b>\r\n            <br />{\" \"}\r\n            {recMedia.title.english\r\n              ? recMedia.title.english\r\n              : recMedia.title.romaji}\r\n          </p>\r\n          {recMedia.format && (\r\n            <p>\r\n              <b>Format:</b>\r\n              <br /> {recMedia.format.toLowerCase()}\r\n            </p>\r\n          )}\r\n          {recMedia.source && (\r\n            <p>\r\n              <b>Source:</b>\r\n              <br /> {recMedia.source.toLowerCase()}\r\n            </p>\r\n          )}\r\n          {recMedia.status && (\r\n            <p>\r\n              <b>Status:</b>\r\n              <br /> {recMedia.status.toLowerCase()}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {recMedia.description && (\r\n        <div className=\"recom-desc line-clamp-5\">\r\n          <b>Description:</b> <Markup content={recMedia.description} />\r\n        </div>\r\n      )}\r\n      <div className=\"recom-rating\">\r\n        {rating !== undefined &&\r\n          (rating <= 0 ? (\r\n            <div className=\"red-rate\">\r\n              {rating} <FontAwesomeIcon icon={faThumbsDown} />\r\n            </div>\r\n          ) : (\r\n            <div className=\"green-rate\">\r\n              +{rating} <FontAwesomeIcon icon={faThumbsUp} />\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </motion.a>\r\n  );\r\n};\r\n\r\nexport default Recom;\r\n","import React from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport CircleRate from \"./detailPage/CircleRate\";\r\nimport { useApolloClient, gql } from \"@apollo/client\";\r\n\r\nconst Anime = ({ anime }) => {\r\n  const client = useApolloClient();\r\n  const history = useHistory();\r\n\r\n  const animeCardClickHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    client.writeQuery({\r\n      query: gql`\r\n        query WriteIsLoading {\r\n          loadingbar {\r\n            isLoading\r\n          }\r\n        }\r\n      `,\r\n      data: {\r\n        // Contains the data to write\r\n        loadingbar: {\r\n          __typename: \"LoadingBar\",\r\n          isLoading: 30,\r\n        },\r\n      },\r\n    });\r\n\r\n    setTimeout(() => {\r\n      history.push(`/anime/${anime.id}`);\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <motion.a\r\n      href={`/anime/${anime.id}`}\r\n      onClick={animeCardClickHandler}\r\n      className=\"anime-card-container group hover-card-num-1\"\r\n      animate={{ opacity: 1, transition: { duration: 1 } }}\r\n      initial={{ opacity: 0 }}\r\n    >\r\n      {anime.averageScore !== undefined && (\r\n        <div\r\n          className=\"anime-circle-rate transform translate-x-4 -translate-y-4 \r\n    group-hover:translate-y-0.5 group-hover:-translate-x-0.5 \"\r\n        >\r\n          <CircleRate rate={anime.averageScore} size={4} />\r\n        </div>\r\n      )}\r\n\r\n      <img alt=\"\" src={anime.coverImage.large}></img>\r\n      <div\r\n        className=\"anime-info\r\n       \"\r\n      >\r\n        <div className=\" bg-yellow-300 \">{anime.format}</div>\r\n        <div className=\" bg-green-300 \">{anime.source}</div>\r\n        <div className=\" bg-red-300 \">{anime.status}</div>\r\n      </div>\r\n      <h3 className=\"line-clamp-2\">\r\n        {anime.title.english !== null\r\n          ? anime.title.english\r\n          : anime.title.romaji}\r\n      </h3>\r\n    </motion.a>\r\n  );\r\n};\r\n\r\nexport default Anime;\r\n","import React, { useState } from \"react\";\r\nimport Anime from \"./Anime\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst AnimeList = ({ allAnimeData, initialQuantity, colsInRow, keyParam }) => {\r\n  const [showMore, setShowMore] = useState({\r\n    stream: initialQuantity,\r\n  });\r\n\r\n  let gridColsTemp = `grid-cols-2 ssm:grid-cols-${colsInRow - 1} lg:grid-cols-${\r\n    colsInRow - 1\r\n  } xl:grid-cols-${colsInRow}`;\r\n\r\n  const streamShowMoreHandler = (e) => {\r\n    if (showMore.stream > 30) {\r\n      setShowMore({ ...showMore, stream: showMore.stream + 999 });\r\n      e.target.style.display = \"none\";\r\n    } else {\r\n      setShowMore({ ...showMore, stream: showMore.stream + 10 });\r\n    }\r\n    if (showMore.stream + 10 >= allAnimeData.length) {\r\n      e.target.style.display = \"none\";\r\n    }\r\n  };\r\n\r\n  // maintain the array for duplicate elements\r\n  let counterAnime = [];\r\n  let trimedAllAnimeData = allAnimeData.filter((anime) => {\r\n    let anim = anime.id !== undefined ? anime : anime.node;\r\n    if (!counterAnime.includes(anim.id)) {\r\n      counterAnime.push(anim.id);\r\n      if (anime !== undefined) {\r\n        return anime;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n\r\n  return (\r\n    <motion.div className=\"pb-10\">\r\n      <div className=\"anime-list-container\">\r\n        <motion.div className={`anime-list ${gridColsTemp}`}>\r\n          {trimedAllAnimeData\r\n            .filter((_, index) => index <= showMore.stream - 1)\r\n            .map((anime) => {\r\n              //check where the data come from node or media\r\n              const animeData = anime.id !== undefined ? anime : anime.node;\r\n              return (\r\n                <Anime key={`${keyParam}-${animeData.id}`} anime={animeData} />\r\n              );\r\n            })}\r\n        </motion.div>\r\n      </div>\r\n      {allAnimeData.length > initialQuantity && (\r\n        <button\r\n          onClick={streamShowMoreHandler}\r\n          className=\"stream-show-more-btn\"\r\n        >\r\n          Load More\r\n        </button>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\nexport default AnimeList;\r\n","import React, { useState, useRef } from \"react\";\r\nimport Recom from \"./Recom\";\r\nimport { faChevronCircleRight } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { recomListQuery } from \"../../utils/queries\";\r\nimport { useQuery } from \"@apollo/client\";\r\n\r\nconst RecomList = ({ allRecom, animeID, initialQuantity, keyParam }) => {\r\n  const isSmallDevice = document.documentElement.clientWidth <= 768;\r\n  const magicNum1 = 250;\r\n  const magicNum2 = isSmallDevice ? 264 : 264 * 2;\r\n  const magicNum3 = 275;\r\n  const rightLeftScroll = useRef(null);\r\n  const wastefulCover = useRef(null);\r\n\r\n  const [showMore, setShowMore] = useState({\r\n    recommend: initialQuantity,\r\n  });\r\n\r\n  let id;\r\n  if (animeID) {\r\n    id = animeID;\r\n  } else {\r\n    id = 16498;\r\n  }\r\n  const { loading, error, data } = useQuery(recomListQuery, {\r\n    variables: {\r\n      id: id,\r\n    },\r\n  });\r\n\r\n  if (loading) {\r\n    return null;\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error.message);\r\n    return `Error! ${error}`;\r\n  }\r\n\r\n  let allRecomData;\r\n  if (allRecom) {\r\n    allRecomData = allRecom;\r\n  } else {\r\n    allRecomData = data.Media.recommendations.edges;\r\n  }\r\n\r\n  let isDown = false;\r\n  let startx, scrollLeft;\r\n\r\n  const recSliderMouseDownHandler = (e) => {\r\n    e.preventDefault();\r\n    isDown = true;\r\n    startx = e.pageX - rightLeftScroll.current.offsetLeft;\r\n    scrollLeft = rightLeftScroll.current.scrollLeft;\r\n  };\r\n\r\n  const recSliderMouseLeaveHandler = () => {\r\n    isDown = false;\r\n    wastefulCover.current.style.display = \"none\";\r\n  };\r\n\r\n  const recSliderMouseUpHandler = () => {\r\n    isDown = false;\r\n\r\n    wastefulCover.current.style.display = \"none\";\r\n\r\n    setShowMore({ recommend: allRecomData.length });\r\n  };\r\n\r\n  const recSliderMouseMoveHandler = (e) => {\r\n    if (!isDown) return;\r\n    e.preventDefault();\r\n    const x = e.pageX - rightLeftScroll.current.offsetLeft;\r\n    const walk = (x - startx) * 1.5;\r\n    rightLeftScroll.current.scrollLeft = scrollLeft - walk;\r\n    wastefulCover.current.style.display = \"block\";\r\n  };\r\n\r\n  const rightScrollHandler = () => {\r\n    let recLeft = rightLeftScroll.current.scrollLeft;\r\n    let recWidth = rightLeftScroll.current.scrollWidth;\r\n\r\n    if ((Math.round(recLeft) - magicNum1) % magicNum2 !== 0) {\r\n      recLeft = Math.round((Math.round(recLeft) - magicNum1) / magicNum2);\r\n      recLeft = recLeft * magicNum2 + magicNum1;\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recWidth === recLeft ? recLeft + magicNum3 : recLeft + magicNum2,\r\n        behavior: \"smooth\",\r\n      });\r\n      if (\r\n        isSmallDevice\r\n          ? showMore.recommend < allRecomData.length + 1\r\n          : showMore.recommend < allRecomData.length + 3\r\n      ) {\r\n        const newRecommend = isSmallDevice\r\n          ? showMore.recommend + 1\r\n          : showMore.recommend + 3;\r\n        setShowMore({ recommend: newRecommend });\r\n      }\r\n    } else {\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recLeft === 0 ? recLeft + magicNum1 : recLeft + magicNum2,\r\n        behavior: \"smooth\",\r\n      });\r\n\r\n      if (\r\n        isSmallDevice\r\n          ? showMore.recommend < allRecomData.length + 1\r\n          : showMore.recommend < allRecomData.length + 3\r\n      ) {\r\n        const newRecommend = isSmallDevice\r\n          ? showMore.recommend + 1\r\n          : showMore.recommend + 3;\r\n        setShowMore({ recommend: newRecommend });\r\n      }\r\n    }\r\n  };\r\n  const leftScrollHandler = () => {\r\n    let recLeft = rightLeftScroll.current.scrollLeft;\r\n    let recWidth = rightLeftScroll.current.scrollWidth;\r\n    if ((Math.round(recLeft) - magicNum1) % magicNum2 !== 0) {\r\n      recLeft = Math.round((Math.round(recLeft) - magicNum1) / magicNum2);\r\n      recLeft = recLeft * magicNum2 + magicNum1;\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recWidth === recLeft ? recLeft - magicNum3 : recLeft - magicNum2,\r\n        behavior: \"smooth\",\r\n      });\r\n    } else {\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recWidth === recLeft ? recLeft - magicNum3 : recLeft - magicNum2,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const recTouchHandler = () => {\r\n    let recLeft = rightLeftScroll.current.scrollLeft;\r\n    let recWidth = rightLeftScroll.current.scrollWidth;\r\n\r\n    if (recLeft / recWidth < 0.5) {\r\n      if (\r\n        isSmallDevice\r\n          ? showMore.recommend < allRecomData.length + 1\r\n          : showMore.recommend < allRecomData.length + 3\r\n      ) {\r\n        setShowMore({ recommend: allRecomData.length });\r\n      }\r\n    }\r\n    if ((Math.round(recLeft) - magicNum1) % magicNum2 !== 0 && recLeft !== 0) {\r\n      recLeft = Math.round((Math.round(recLeft) - magicNum1) / magicNum2);\r\n      recLeft = recLeft * magicNum2 + magicNum1;\r\n      rightLeftScroll.current.scrollTo({\r\n        top: 0,\r\n        left: recLeft,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {allRecomData.length > 0 && (\r\n        <div>\r\n          <h4 className=\"recom-list-title\">Recommendations</h4>\r\n          <div className=\"recommendation-parent\">\r\n            <div\r\n              className=\"recommendation\"\r\n              ref={rightLeftScroll}\r\n              onTouchEnd={recTouchHandler}\r\n              onMouseDown={recSliderMouseDownHandler}\r\n              onMouseLeave={recSliderMouseLeaveHandler}\r\n              onMouseUp={recSliderMouseUpHandler}\r\n              onMouseMove={recSliderMouseMoveHandler}\r\n            >\r\n              <div>\r\n                {allRecomData.slice(0, showMore.recommend - 1).map((recom, index) => {\r\n                    const id = recom.node\r\n                      ? recom.node.mediaRecommendation.id\r\n                      : recom.media.id;\r\n                    return <Recom key={keyParam + id + index} recom={recom} />;\r\n                })}\r\n                <div ref={wastefulCover} className=\"wasteful-cover\"></div>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={leftScrollHandler}\r\n              className=\"left-0 bg-gradient-to-l\"\r\n            >\r\n              <FontAwesomeIcon\r\n                className=\"font-icon-recom-list rotate-180\"\r\n                icon={faChevronCircleRight}\r\n              />\r\n            </button>\r\n            <button\r\n              onClick={rightScrollHandler}\r\n              className=\"right-0 bg-gradient-to-r\"\r\n            >\r\n              <FontAwesomeIcon\r\n                className=\"font-icon-recom-list\"\r\n                icon={faChevronCircleRight}\r\n              />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default RecomList;\r\n"],"sourceRoot":""}